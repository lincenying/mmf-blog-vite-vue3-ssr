import{d as $,u as N,P as j,s as g,t as k,k as D,l as L,I as M,r as V,h as B,o as a,c as o,b as c,a as R,F,q,p as y,x as z,v as E,j as u,W as H,e as I,w as U,i as W,D as S,C}from"./main-CTY4IKlK.js";import{u as b}from"./use-backend-admin-store-DWquSaqj.js";import{u as G}from"./vue.8fc199ce-Bmv443Wm.js";const J={class:"card settings-main"},K={class:"settings-main-content"},O={class:"list-email"},Q={class:"list-date"},X={class:"list-action"},Y=["onClick"],Z=["onClick"],ee={key:0,class:"settings-footer"},se={key:1,class:"admin-load-more",href:"javascript:;"},ne=$({name:"BackendAdminList",asyncData(m){const{store:l,route:r,api:n}=m;return b(l).getAdminList({page:1,path:r.fullPath},n)},__name:"backend-admin-list",setup(m){const l=N(),r=j(),n=b(),v=g(n),d=k(v,"lists"),T=g(r),w=k(T,"historyPageScrollTop");D();const[_,p]=L(!1);async function f(e=d.value.page){_.value||(p(!0),await n.getAdminList({page:e,path:l.fullPath}),p(!1))}async function A(e){const{code:s,message:i}=await S.get("backend/admin/recover",{id:e});s===200&&(C({type:"success",content:i}),n.recoverAdmin(e))}async function x(e){const{code:s,message:i}=await S.get("backend/admin/delete",{id:e});s===200&&(C({type:"success",content:i}),n.deleteAdmin(e))}M(()=>{if(d.value.path==="")f(1);else{const e=w.value[l.path]||0;window.scrollTo(0,e)}});const h=V("管理员列表 - M.M.F 小屋");return G({title:h,meta:[{name:"description",content:h}]}),(e,s)=>{const i=B("router-link");return a(),o("div",J,[c("div",K,[s[2]||(s[2]=R('<div class="list-section list-header"><div class="list-username">用户名</div><div class="list-email">邮箱</div><div class="list-date">时间</div><div class="list-action">操作</div></div>',1)),(a(!0),o(F,null,q(d.value.data,t=>(a(),o("div",{key:t._id,class:"list-section"},[c("div",{class:E(["list-username",t.is_delete?"text-red-500 line-through":""])},u(t.username),3),c("div",O,u(t.email),1),c("div",Q,u(y(H)(t.update_date)),1),c("div",X,[I(i,{to:`/backend/admin/modify/${t._id}`,class:"badge badge-success"},{default:U(()=>s[1]||(s[1]=[W("编辑")])),_:2},1032,["to"]),t.is_delete?(a(),o("a",{key:0,href:"javascript:;",onClick:P=>A(t._id)},"恢复",8,Y)):(a(),o("a",{key:1,href:"javascript:;",onClick:P=>x(t._id)},"删除",8,Z))])]))),128))]),d.value.hasNext?(a(),o("div",ee,[y(_)?(a(),o("a",se,"加载中...")):(a(),o("a",{key:0,class:"admin-load-more",href:"javascript:;",onClick:s[0]||(s[0]=t=>f())},"加载更多"))])):z("",!0)])}}});export{ne as default};
