import{d as L,s as h,B as k,w as N,o as P,q as B,r as D,a2 as M,c as a,g as c,e as V,a3 as j,a7 as R,a8 as F,u as y,f as o,D as q,a6 as u,ai as z,K as E,L as H,a5 as J,J as K}from"./vendor-C8cObGch.js";import{u as S}from"./use-backend-admin-store-bb7GWFgc.js";import{f as U,u as G,c as C,s as b}from"./main-Bpljy6lB.js";/* empty css               */const I={class:"card settings-main"},O={class:"settings-main-content"},Q={class:"list-email"},W={class:"list-date"},X={class:"list-action"},Y=["onClick"],Z=["onClick"],ee={key:0,class:"settings-footer"},se={key:1,class:"admin-load-more",href:"javascript:;"},ie=L({name:"BackendAdminList",asyncData(m){const{store:l,route:r,api:n}=m;return S(l).getAdminList({page:1,path:r.fullPath},n)},__name:"backend-admin-list",setup(m){const l=B(),r=U(),n=S(),_=h(n),d=k(_,"lists"),T=h(r),w=k(T,"historyPageScrollTop");G();const[p,v]=N(!1);async function f(e=d.value.page){p.value||(v(!0),await n.getAdminList({page:e,path:l.fullPath}),v(!1))}async function A(e){const{code:s,message:i}=await C.get("backend/admin/recover",{id:e});s===200&&(b({type:"success",content:i}),n.recoverAdmin(e))}async function $(e){const{code:s,message:i}=await C.get("backend/admin/delete",{id:e});s===200&&(b({type:"success",content:i}),n.deleteAdmin(e))}P(()=>{if(d.value.path==="")f(1);else{const e=w.value[l.path]||0;window.scrollTo(0,e)}});const g=D("管理员列表 - M.M.F 小屋");return M({title:g,meta:[{name:"description",content:g}]}),(e,s)=>{const i=K("router-link");return o(),a("div",I,[c("div",O,[s[2]||(s[2]=j('<div class="list-section list-header"><div class="list-username">用户名</div><div class="list-email">邮箱</div><div class="list-date">时间</div><div class="list-action">操作</div></div>',1)),(o(!0),a(R,null,F(d.value.data,t=>(o(),a("div",{key:t._id,class:"list-section"},[c("div",{class:q(["list-username",t.is_delete?"text-red-500 line-through":""])},u(t.username),3),c("div",Q,u(t.email),1),c("div",W,u(y(z)(t.update_date)),1),c("div",X,[E(i,{to:`/backend/admin/modify/${t._id}`,class:"badge badge-success"},{default:H(()=>[...s[1]||(s[1]=[J("编辑",-1)])]),_:1},8,["to"]),t.is_delete?(o(),a("a",{key:0,href:"javascript:;",onClick:x=>A(t._id)},"恢复",8,Y)):(o(),a("a",{key:1,href:"javascript:;",onClick:x=>$(t._id)},"删除",8,Z))])]))),128))]),d.value.hasNext?(o(),a("div",ee,[y(p)?(o(),a("a",se,"加载中...")):(o(),a("a",{key:0,class:"admin-load-more",href:"javascript:;",onClick:s[0]||(s[0]=t=>f())},"加载更多"))])):V("",!0)])}}});export{ie as default};
