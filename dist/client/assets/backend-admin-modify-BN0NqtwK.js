import{_ as A}from"./a-input.vue_vue_type_script_setup_true_lang-B_aRafhe.js";import{d as V,y as T,F as h,q as B,h as C,x as N,ae as R,r as S,a2 as U,c as D,o as F,b as a,J as l,K as m,w as p,G as c,u as n,a5 as I,M as P,N as $}from"./vendor-CjYDLnoj.js";import{u as g}from"./use-backend-admin-store-DT2TZfeB.js";import{s as w,c as j}from"./main-DSyQ4RNn.js";/* empty css               */const q={class:"card settings-main"},E={class:"settings-main-content"},G={class:"settings-footer"},O=V({name:"BackendAdminModify",asyncData(f){const{store:u,route:r,api:d}=f;return g(u).getAdminItem({id:r.params.id,path:r.fullPath},d)},__name:"backend-admin-modify",setup(f){const u=N(),r=$(),d=g(),b=T(d),y=h(b,"item"),[v,_]=B(!1),t=C({id:u.params.id,username:"",email:"",password:""});R(y.value,s=>{s.data&&(t.username=s.data.username,t.email=s.data.email)},{immediate:!0});async function x(){if(!t.username||!t.email){w("请将表单填写完整!");return}if(v.value)return;_(!0);const{code:s,data:e,message:o}=await j.post("backend/admin/modify",t);_(!1),s===200&&(w({type:"success",content:o}),d.updateAdminItem(e),r.push("/backend/admin/list"))}const k=S("编辑管理员 - M.M.F 小屋");return U({title:k,meta:[{name:"description",content:k}]}),(s,e)=>{const o=A,M=P("router-link");return F(),D("div",q,[a("div",E,[a("form",null,[l(o,{title:"昵称"},{default:m(()=>[p(a("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>n(t).username=i),type:"text",placeholder:"昵称",class:"base-input",name:"username"},null,512),[[c,n(t).username]]),e[3]||(e[3]=a("span",{class:"input-info error"},"请输入昵称",-1))]),_:1}),l(o,{title:"邮箱"},{default:m(()=>[p(a("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>n(t).email=i),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[c,n(t).email]]),e[4]||(e[4]=a("span",{class:"input-info error"},"请输入邮箱",-1))]),_:1}),l(o,{title:"密码"},{default:m(()=>[p(a("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>n(t).password=i),type:"password",placeholder:"密码",class:"base-input",name:"password"},null,512),[[c,n(t).password]]),e[5]||(e[5]=a("span",{class:"input-info error"},"请输入密码",-1))]),_:1})])]),a("div",G,[a("a",{href:"javascript:;",class:"btn btn-yellow",onClick:x},"编辑管理员"),l(M,{to:"/backend/admin/list",class:"btn btn-blue"},{default:m(()=>[...e[6]||(e[6]=[I("返回",-1)])]),_:1})])])}}});export{O as default};
