import{_ as N}from"./a-input.vue_vue_type_script_setup_true_lang-CsH4OfB8.js";import{v as e,u as v,j as k,s as x,b as g,e as p,f as E}from"./main-BBnOZaJ_.js";import{u as f}from"./use-backend-admin-store-CeHZiBLF.js";import{u as y}from"./vue.8fc199ce-DvXPQa2A.js";const h={class:"card settings-main"},M={class:"settings-main-content"},C={class:"settings-footer"},S=e.defineComponent({name:"BackendAdminModify",asyncData(l){const{store:d,route:r,api:i}=l;return f(d).getAdminItem({id:r.params.id,path:r.fullPath},i)},__name:"backend-admin-modify",setup(l){const d=v(),r=k(),i=f(),m=x(i),V=e.toRef(m,"item"),[b,u]=g(!1),n=e.reactive({id:d.params.id,username:"",email:"",password:""});e.watch(V.value,a=>{a.data&&(n.username=a.data.username,n.email=a.data.email)});async function w(){if(!n.username||!n.email){p("请将表单填写完整!");return}if(b.value)return;u(!0);const{code:a,data:t,message:o}=await E.post("backend/admin/modify",n);u(!1),a===200&&(p({type:"success",content:o}),i.updateAdminItem(t),r.push("/backend/admin/list"))}const c=e.ref("编辑管理员 - M.M.F 小屋");return y({title:c,meta:[{name:"description",content:c}]}),(a,t)=>{const o=N,_=e.resolveComponent("router-link");return e.openBlock(),e.createElementBlock("div",h,[e.createElementVNode("div",M,[e.createElementVNode("form",null,[e.createVNode(o,{title:"昵称"},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.unref(n).username=s),type:"text",placeholder:"昵称",class:"base-input",name:"username"},null,512),[[e.vModelText,e.unref(n).username]]),t[3]||(t[3]=e.createElementVNode("span",{class:"input-info error"},"请输入昵称",-1))]),_:1}),e.createVNode(o,{title:"邮箱"},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.unref(n).email=s),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[e.vModelText,e.unref(n).email]]),t[4]||(t[4]=e.createElementVNode("span",{class:"input-info error"},"请输入邮箱",-1))]),_:1}),e.createVNode(o,{title:"密码"},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.unref(n).password=s),type:"password",placeholder:"密码",class:"base-input",name:"password"},null,512),[[e.vModelText,e.unref(n).password]]),t[5]||(t[5]=e.createElementVNode("span",{class:"input-info error"},"请输入密码",-1))]),_:1})])]),e.createElementVNode("div",C,[e.createElementVNode("a",{href:"javascript:;",class:"btn btn-yellow",onClick:w},"编辑管理员"),e.createVNode(_,{to:"/backend/admin/list",class:"btn btn-blue"},{default:e.withCtx(()=>t[6]||(t[6]=[e.createTextVNode("返回")])),_:1})])])}}});export{S as default};
