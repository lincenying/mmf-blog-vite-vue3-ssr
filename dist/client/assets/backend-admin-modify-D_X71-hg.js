import{_ as A}from"./a-input.vue_vue_type_script_setup_true_lang-gsShgKbE.js";import{d as V,s as h,B,w as T,h as C,q as R,ah as S,r as N,a2 as U,c as D,g as a,K as l,L as m,M as F,J as I,f as L,F as p,G as c,u as n,a5 as P}from"./vendor-C8cObGch.js";import{u as k}from"./use-backend-admin-store-bb7GWFgc.js";import{s as w,c as $}from"./main-Bpljy6lB.js";/* empty css               */const j={class:"card settings-main"},q={class:"settings-main-content"},E={class:"settings-footer"},O=V({name:"BackendAdminModify",asyncData(f){const{store:u,route:r,api:d}=f;return k(u).getAdminItem({id:r.params.id,path:r.fullPath},d)},__name:"backend-admin-modify",setup(f){const u=R(),r=F(),d=k(),_=h(d),y=B(_,"item"),[v,b]=T(!1),t=C({id:u.params.id,username:"",email:"",password:""});S(y.value,s=>{s.data&&(t.username=s.data.username,t.email=s.data.email)},{immediate:!0});async function x(){if(!t.username||!t.email){w("请将表单填写完整!");return}if(v.value)return;b(!0);const{code:s,data:e,message:o}=await $.post("backend/admin/modify",t);b(!1),s===200&&(w({type:"success",content:o}),d.updateAdminItem(e),r.push("/backend/admin/list"))}const g=N("编辑管理员 - M.M.F 小屋");return U({title:g,meta:[{name:"description",content:g}]}),(s,e)=>{const o=A,M=I("router-link");return L(),D("div",j,[a("div",q,[a("form",null,[l(o,{title:"昵称"},{default:m(()=>[p(a("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>n(t).username=i),type:"text",placeholder:"昵称",class:"base-input",name:"username"},null,512),[[c,n(t).username]]),e[3]||(e[3]=a("span",{class:"input-info error"},"请输入昵称",-1))]),_:1}),l(o,{title:"邮箱"},{default:m(()=>[p(a("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>n(t).email=i),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[c,n(t).email]]),e[4]||(e[4]=a("span",{class:"input-info error"},"请输入邮箱",-1))]),_:1}),l(o,{title:"密码"},{default:m(()=>[p(a("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>n(t).password=i),type:"password",placeholder:"密码",class:"base-input",name:"password"},null,512),[[c,n(t).password]]),e[5]||(e[5]=a("span",{class:"input-info error"},"请输入密码",-1))]),_:1})])]),a("div",E,[a("a",{href:"javascript:;",class:"btn btn-yellow",onClick:x},"编辑管理员"),l(M,{to:"/backend/admin/list",class:"btn btn-blue"},{default:m(()=>[...e[6]||(e[6]=[P("返回",-1)])]),_:1})])])}}});export{O as default};
