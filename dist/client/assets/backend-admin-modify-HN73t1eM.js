import{_ as M}from"./a-input.vue_vue_type_script_setup_true_lang-oFZQFnI9.js";import{d as V,u as C,N as T,s as h,t as B,l as N,A as R,U as S,r as U,h as D,o as H,c as I,b as s,e as l,w as m,G as p,p as n,H as c,i as P,C as g,D as $}from"./main-CTY4IKlK.js";import{u as w}from"./use-backend-admin-store-DWquSaqj.js";import{u as j}from"./vue.8fc199ce-Bmv443Wm.js";const E={class:"card settings-main"},F={class:"settings-main-content"},G={class:"settings-footer"},K=V({name:"BackendAdminModify",asyncData(f){const{store:u,route:r,api:d}=f;return w(u).getAdminItem({id:r.params.id,path:r.fullPath},d)},__name:"backend-admin-modify",setup(f){const u=C(),r=T(),d=w(),b=h(d),y=B(b,"item"),[v,_]=N(!1),t=R({id:u.params.id,username:"",email:"",password:""});S(y.value,a=>{a.data&&(t.username=a.data.username,t.email=a.data.email)});async function x(){if(!t.username||!t.email){g("请将表单填写完整!");return}if(v.value)return;_(!0);const{code:a,data:e,message:o}=await $.post("backend/admin/modify",t);_(!1),a===200&&(g({type:"success",content:o}),d.updateAdminItem(e),r.push("/backend/admin/list"))}const k=U("编辑管理员 - M.M.F 小屋");return j({title:k,meta:[{name:"description",content:k}]}),(a,e)=>{const o=M,A=D("router-link");return H(),I("div",E,[s("div",F,[s("form",null,[l(o,{title:"昵称"},{default:m(()=>[p(s("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>n(t).username=i),type:"text",placeholder:"昵称",class:"base-input",name:"username"},null,512),[[c,n(t).username]]),e[3]||(e[3]=s("span",{class:"input-info error"},"请输入昵称",-1))]),_:1}),l(o,{title:"邮箱"},{default:m(()=>[p(s("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>n(t).email=i),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[c,n(t).email]]),e[4]||(e[4]=s("span",{class:"input-info error"},"请输入邮箱",-1))]),_:1}),l(o,{title:"密码"},{default:m(()=>[p(s("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>n(t).password=i),type:"password",placeholder:"密码",class:"base-input",name:"password"},null,512),[[c,n(t).password]]),e[5]||(e[5]=s("span",{class:"input-info error"},"请输入密码",-1))]),_:1})])]),s("div",G,[s("a",{href:"javascript:;",class:"btn btn-yellow",onClick:x},"编辑管理员"),l(A,{to:"/backend/admin/list",class:"btn btn-blue"},{default:m(()=>e[6]||(e[6]=[P("返回")])),_:1})])])}}});export{K as default};
