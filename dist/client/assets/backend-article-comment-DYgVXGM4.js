import{c as d,d as j,s as k}from"./main-Bpljy6lB.js";import{d as B,s as D,B as L,w as M,o as N,r as S,a2 as $,c as o,g as e,e as A,K as R,L as T,a7 as V,a8 as x,u,q as P,J as F,f as n,a5 as q,a6 as _,ae as E}from"./vendor-C8cObGch.js";import{u as C}from"./use-global-comment-store-Bxcgx7dV.js";/* empty css               */const H={class:"card"},J={class:"comments"},K={class:"comment-back"},z={class:"comment-items-wrap"},G={href:"javascript:;",class:"comment-author-avatar-link"},I=["src"],O={class:"comment-content-wrap"},Q={class:"comment-author-wrap"},U={href:"javascript:;",class:"comment-author"},W={class:"comment-content"},X={class:"comment-footer"},Y={class:"comment-time"},Z=["onClick"],ee=["onClick"],te={key:0,class:"load-more-wrap"},se={key:1,href:"javascript:;",class:"comments-load-more"},re=B({name:"BackendArticleComment",asyncData(p){const{store:m,route:c,api:l}=p;return C(m).getCommentList({page:1,path:c.fullPath,all:1,id:c.params.id},l)},__name:"backend-article-comment",setup(p){const m=P(),c=C(),l=D(c),r=L(l,"lists"),[f,h]=M(!1);async function v(t=r.value.page){f.value||(h(!0),await c.getCommentList({page:t,path:m.fullPath,all:1,id:m.params.id},d),h(!1))}async function y(t){const{code:a,message:i}=await d.get("frontend/comment/recover",{id:t});a===200&&(k({type:"success",content:i}),c.recoverComment(t))}async function w(t){const{code:a,message:i}=await d.get("frontend/comment/delete",{id:t});a===200&&(k({type:"success",content:i}),c.deleteComment(t))}N(()=>{r.value.path===""&&v(1)});const g=S("评论列表 - M.M.F 小屋");return $({title:g,meta:[{name:"description",content:g}]}),(t,a)=>{const i=F("router-link");return n(),o("div",H,[e("div",J,[e("div",K,[R(i,{to:"/backend/article/list",class:"btn btn-blue"},{default:T(()=>[...a[1]||(a[1]=[q("返回",-1)])]),_:1})]),e("div",z,[(n(!0),o(V,null,x(r.value.data,s=>(n(),o("div",{key:s._id,class:"comment-item"},[e("a",G,[e("img",{src:("useAvatar"in t?t.useAvatar:u(j))(s.email),alt:"",class:"avatar-img"},null,8,I)]),e("div",O,[e("span",Q,[e("a",U,_(s.username),1)]),e("div",W,_(s.content),1),e("div",X,[e("span",Y,_(u(E)(`${s.timestamp}`)),1),s.is_delete?(n(),o("a",{key:0,href:"javascript:;",class:"comment-action-item comment-reply",onClick:b=>y(s._id)},"恢复",8,Z)):(n(),o("a",{key:1,href:"javascript:;",class:"comment-action-item comment-reply",onClick:b=>w(s._id)},"删除",8,ee))])])]))),128))]),r.value.hasNext?(n(),o("div",te,[u(f)?(n(),o("a",se,"加载中...")):(n(),o("a",{key:0,href:"javascript:;",class:"comments-load-more",onClick:a[0]||(a[0]=s=>v())},"加载更多"))])):A("",!0)])])}}});export{re as default};
