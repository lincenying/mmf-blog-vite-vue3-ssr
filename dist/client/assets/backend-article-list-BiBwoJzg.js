import{d as B,y as m,F as h,q as D,g as L,x as V,r as j,a2 as R,c as o,o as a,b as n,a as y,a3 as F,a8 as H,a9 as q,u as b,M as z,H as E,a6 as u,ab as J,J as K,O,K as S,a5 as C}from"./vendor-CzvG84Te.js";import{u as A}from"./use-backend-article-store-Bo1XJ0JB.js";import{f as G,u as I,c as T,s as $}from"./main-CkD4N4CH.js";/* empty css               */const Q={class:"settings-main card"},U={class:"settings-main-content"},W={class:"list-category"},X={class:"list-date"},Y={class:"list-action"},Z=["onClick"],ee=["onClick"],te={key:0,class:"settings-footer"},se={key:1,class:"admin-load-more",href:"javascript:;"},ne=B({name:"BackendArticleList",asyncData(_){const{store:l,route:d,api:i}=_;return A(l).getArticleList({page:1,path:d.fullPath},i)},__name:"backend-article-list",setup(_){const l=V(),d=G(),i=A(),p=m(i),r=h(p,"lists"),w=m(d),x=h(w,"historyPageScrollTop");I();const[v,f]=D(!1);async function g(s=r.value.page){v.value||(f(!0),await i.getArticleList({page:s,path:l.fullPath}),f(!1))}async function M(s){const{code:e,message:c}=await T.get("backend/article/recover",{id:s});e===200&&($({type:"success",content:c}),i.recoverArticle(s))}async function N(s){const{code:e,message:c}=await T.get("backend/article/delete",{id:s});e===200&&($({type:"success",content:c}),i.deleteArticle(s))}L(()=>{if(r.value.path==="")g(1);else{const s=x.value[l.path]||0;window.scrollTo(0,s)}});const k=j("文章列表 - M.M.F 小屋");return R({title:k,meta:[{name:"description",content:k}]}),(s,e)=>{const c=z("router-link");return a(),o("div",Q,[n("div",U,[e[3]||(e[3]=F('<div class="list-section list-header"><div class="list-title">标题</div><div class="list-category">分类</div><div class="list-date">最后更新</div><div class="list-action">操作</div></div>',1)),(a(!0),o(H,null,q(r.value.data,t=>(a(),o("div",{key:t._id,class:"list-section"},[n("div",{class:E(["list-title",t.is_delete?"text-red-500 line-through":""])},u(t.title),3),n("div",W,u(t.category_name),1),n("div",X,u(b(J)(t.update_date)),1),n("div",Y,[K(c,{to:`/backend/article/modify/${t._id}`,class:"badge badge-success"},{default:S(()=>[...e[1]||(e[1]=[C("编辑",-1)])]),_:1},8,["to"]),t.is_delete?(a(),o("a",{key:0,href:"javascript:;",onClick:P=>M(t._id)},"恢复",8,Z)):(a(),o("a",{key:1,href:"javascript:;",onClick:P=>N(t._id)},"删除",8,ee)),t.comment_count>0?(a(),O(c,{key:2,to:`/backend/article/comment/${t._id}`,class:"badge badge-success"},{default:S(()=>[...e[2]||(e[2]=[C(" 评论 ",-1)])]),_:1},8,["to"])):y("",!0)])]))),128))]),r.value.hasNext?(a(),o("div",te,[b(v)?(a(),o("a",se,"加载中...")):(a(),o("a",{key:0,class:"admin-load-more",href:"javascript:;",onClick:e[0]||(e[0]=t=>g())},"加载更多"))])):y("",!0)])}}});export{ne as default};
