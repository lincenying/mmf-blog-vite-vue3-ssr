import{d as V,s as y,B as b,w as j,r as S,o as R,q as K,a2 as F,c as o,g as i,e as x,F as q,G as z,u as v,N as E,ad as G,a3 as H,a7 as J,a8 as O,f as a,D as U,a6 as f,ae as I,K as Q,O as W,L as w,a5 as C,J as X}from"./vendor-C8cObGch.js";import{u as T}from"./use-backend-article-store-IOWC6QEw.js";import{f as Y,u as Z,c as A,s as $}from"./main-Bpljy6lB.js";/* empty css               */const ee={class:"settings-main card"},te={class:"settings-main-content",flex:"~ justify-end","border-b":"1px solid hex-f4f4f4"},se={class:"settings-main-content"},ae={class:"list-category"},oe={class:"list-date"},ie={class:"list-action"},ne=["onClick"],le=["onClick"],ce={key:0,class:"settings-footer"},re={key:1,class:"admin-load-more",href:"javascript:;"},fe=V({name:"BackendArticleList",asyncData(_){const{store:c,route:u,api:n}=_;return T(c).getArticleList({page:1,path:u.fullPath},n)},__name:"backend-article-list",setup(_){const c=K(),u=Y(),n=T(),g=y(n),r=b(g,"lists"),D=y(u),N=b(D,"historyPageScrollTop");Z();const[h,m]=j(!1),d=S("");async function p(s=r.value.page,e=d.value){h.value||(console.log(e),m(!0),await n.getArticleList({page:s,key:e,path:c.fullPath}),m(!1))}async function B(s){const{code:e,message:l}=await A.get("backend/article/recover",{id:s});e===200&&($({type:"success",content:l}),n.recoverArticle(s))}async function L(s){const{code:e,message:l}=await A.get("backend/article/delete",{id:s});e===200&&($({type:"success",content:l}),n.deleteArticle(s))}function M(){p(1)}R(()=>{if(r.value.path==="")p(1);else{const s=N.value[c.path]||0;window.scrollTo(0,s)}});const k=S("文章列表 - M.M.F 小屋");return F({title:k,meta:[{name:"description",content:k}]}),(s,e)=>{const l=X("router-link");return a(),o("div",ee,[i("div",te,[q(i("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>G(d)?d.value=t:null),placeholder:"请输入标题, 记得按回车哦",name:"search",class:"base-input my-10px w-500px",onKeyup:E(M,["enter"])},null,544),[[z,v(d)]])]),i("div",se,[e[4]||(e[4]=H('<div class="list-section list-header"><div class="list-title">标题</div><div class="list-category">分类</div><div class="list-date">最后更新</div><div class="list-action">操作</div></div>',1)),(a(!0),o(J,null,O(r.value.data,t=>(a(),o("div",{key:t._id,class:"list-section"},[i("div",{class:U(["list-title",t.is_delete?"text-red-500 line-through":""])},f(t.title),3),i("div",ae,f(t.category_name),1),i("div",oe,f(v(I)(t.update_date)),1),i("div",ie,[Q(l,{to:`/backend/article/modify/${t._id}`,class:"badge badge-success"},{default:w(()=>[...e[2]||(e[2]=[C("编辑",-1)])]),_:1},8,["to"]),t.is_delete?(a(),o("a",{key:0,href:"javascript:;",onClick:P=>B(t._id)},"恢复",8,ne)):(a(),o("a",{key:1,href:"javascript:;",onClick:P=>L(t._id)},"删除",8,le)),t.comment_count>0?(a(),W(l,{key:2,to:`/backend/article/comment/${t._id}`,class:"badge badge-success"},{default:w(()=>[...e[3]||(e[3]=[C(" 评论 ",-1)])]),_:1},8,["to"])):x("",!0)])]))),128))]),r.value.hasNext?(a(),o("div",ce,[v(h)?(a(),o("a",re,"加载中...")):(a(),o("a",{key:0,class:"admin-load-more",href:"javascript:;",onClick:e[1]||(e[1]=t=>p())},"加载更多"))])):x("",!0)])}}});export{fe as default};
