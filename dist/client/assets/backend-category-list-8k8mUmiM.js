import{u as f}from"./use-global-category-store-DvT7TdiO.js";import{d as P,x as $,y as m,F as v,q as B,g as N,r as R,a2 as V,K as D,o as n,c,a,a8 as h,a9 as F,H as j,a6 as k,L as H,M as q,a5 as z,b as E}from"./vendor-DKdHTvZr.js";import{f as K,u as A,c as d,s as C}from"./main-Bv-ZqgeW.js";/* empty css               */const G={class:"card settings-main"},I={class:"settings-main-content"},J={class:"list-time"},O={class:"list-action"},Q=["onClick"],U=["onClick"],ee=P({name:"BackendCategoryList",asyncData(g){const{store:l,route:r,api:o}=g;return f(l).getCategoryList({limit:99,path:r.fullPath},o)},__name:"backend-category-list",setup(g){const l=$(),r=K(),o=f(),u=m(o),_=v(u,"lists"),S=m(r),b=v(S,"historyPageScrollTop");A();const[T,p]=B(!1);async function w(e){T.value||(p(!0),await o.getCategoryList({page:e,limit:99,path:l.fullPath},d),p(!1))}N(()=>{if(_.value.length===0)w(1);else{const e=b.value[l.path]||0;window.scrollTo(0,e)}});async function x(e){const{code:s,message:i}=await d.get("backend/category/recover",{id:e});s===200&&(C({type:"success",content:i}),o.recoverCategory(e))}async function L(e){const{code:s,message:i}=await d.get("backend/category/delete",{id:e});s===200&&(C({type:"success",content:i}),o.deleteCategory(e))}const y=R("分类列表 - M.M.F 小屋");return V({title:y,meta:[{name:"description",content:y}]}),(e,s)=>{const i=D("router-link");return n(),c("div",G,[a("div",I,[s[1]||(s[1]=a("div",{class:"list-section list-header"},[a("div",{class:"list-title"},"分类名称"),a("div",{class:"list-date"},"分类排序"),a("div",{class:"list-action"},"操作")],-1)),(n(!0),c(h,null,F(_.value,t=>(n(),c("div",{key:t._id,class:"list-section"},[a("div",{class:j(["list-title",t.is_delete?"text-red-500 line-through":""])},k(t.cate_name),3),a("div",J,k(t.cate_order),1),a("div",O,[H(i,{to:`/backend/category/modify/${t._id}`,class:"badge badge-success"},{default:q(()=>s[0]||(s[0]=[z("编辑")])),_:2},1032,["to"]),t.cate_num?E("",!0):(n(),c(h,{key:0},[t.is_delete?(n(),c("a",{key:0,href:"javascript:;",onClick:M=>x(t._id)},"恢复",8,Q)):(n(),c("a",{key:1,href:"javascript:;",onClick:M=>L(t._id)},"删除",8,U))],64))])]))),128))])])}}});export{ee as default};
