import{u as f}from"./use-global-category-store-BoSDKVum.js";import{d as x,s as m,B as v,w as B,o as M,q as D,r as N,a2 as R,c as n,g as a,a7 as h,a8 as V,f as c,D as j,a6 as k,K as F,e as q,L as z,a5 as E,J as H}from"./vendor-C8cObGch.js";import{f as J,u as K,c as d,s as C}from"./main-Bpljy6lB.js";/* empty css               */const A={class:"card settings-main"},G={class:"settings-main-content"},I={class:"list-date"},O={class:"list-action"},Q=["onClick"],U=["onClick"],ee=x({name:"BackendCategoryList",asyncData(g){const{store:i,route:r,api:o}=g;return f(i).getCategoryList({limit:99,path:r.fullPath},o)},__name:"backend-category-list",setup(g){const i=D(),r=J(),o=f(),u=m(o),_=v(u,"lists"),S=m(r),b=v(S,"historyPageScrollTop");K();const[w,p]=B(!1);async function T(e){w.value||(p(!0),await o.getCategoryList({page:e,limit:99,path:i.fullPath},d),p(!1))}M(()=>{if(_.value.length===0)T(1);else{const e=b.value[i.path]||0;window.scrollTo(0,e)}});async function L(e){const{code:s,message:l}=await d.get("backend/category/recover",{id:e});s===200&&(C({type:"success",content:l}),o.recoverCategory(e))}async function P(e){const{code:s,message:l}=await d.get("backend/category/delete",{id:e});s===200&&(C({type:"success",content:l}),o.deleteCategory(e))}const y=N("分类列表 - M.M.F 小屋");return R({title:y,meta:[{name:"description",content:y}]}),(e,s)=>{const l=H("router-link");return c(),n("div",A,[a("div",G,[s[1]||(s[1]=a("div",{class:"list-section list-header"},[a("div",{class:"list-title"},"分类名称"),a("div",{class:"list-date"},"分类排序"),a("div",{class:"list-action"},"操作")],-1)),(c(!0),n(h,null,V(_.value,t=>(c(),n("div",{key:t._id,class:"list-section"},[a("div",{class:j(["list-title",t.is_delete?"text-red-500 line-through":""])},k(t.cate_name),3),a("div",I,k(t.cate_order),1),a("div",O,[F(l,{to:`/backend/category/modify/${t._id}`,class:"badge badge-success"},{default:z(()=>[...s[0]||(s[0]=[E("编辑",-1)])]),_:1},8,["to"]),t.cate_num?q("",!0):(c(),n(h,{key:0},[t.is_delete?(c(),n("a",{key:0,href:"javascript:;",onClick:$=>L(t._id)},"恢复",8,Q)):(c(),n("a",{key:1,href:"javascript:;",onClick:$=>P(t._id)},"删除",8,U))],64))])]))),128))])])}}});export{ee as default};
