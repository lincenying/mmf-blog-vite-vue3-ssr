import{u as f}from"./use-global-category-store-B-Xa5zoa.js";import{d as $,y as m,F as v,q as L,g as B,x as N,r as R,a2 as V,c as n,o as c,b as a,a8 as h,a9 as D,M as F,H as j,a6 as k,J as H,a as q,K as z,a5 as E}from"./vendor-BLXAojGb.js";import{f as J,u as K,c as d,s as C}from"./main-BpQZ0DlM.js";/* empty css               */const A={class:"card settings-main"},G={class:"settings-main-content"},I={class:"list-date"},O={class:"list-action"},Q=["onClick"],U=["onClick"],ee=$({name:"BackendCategoryList",asyncData(g){const{store:i,route:r,api:o}=g;return f(i).getCategoryList({limit:99,path:r.fullPath},o)},__name:"backend-category-list",setup(g){const i=N(),r=J(),o=f(),u=m(o),_=v(u,"lists"),S=m(r),b=v(S,"historyPageScrollTop");K();const[T,p]=L(!1);async function w(e){T.value||(p(!0),await o.getCategoryList({page:e,limit:99,path:i.fullPath},d),p(!1))}B(()=>{if(_.value.length===0)w(1);else{const e=b.value[i.path]||0;window.scrollTo(0,e)}});async function x(e){const{code:s,message:l}=await d.get("backend/category/recover",{id:e});s===200&&(C({type:"success",content:l}),o.recoverCategory(e))}async function M(e){const{code:s,message:l}=await d.get("backend/category/delete",{id:e});s===200&&(C({type:"success",content:l}),o.deleteCategory(e))}const y=R("分类列表 - M.M.F 小屋");return V({title:y,meta:[{name:"description",content:y}]}),(e,s)=>{const l=F("router-link");return c(),n("div",A,[a("div",G,[s[1]||(s[1]=a("div",{class:"list-section list-header"},[a("div",{class:"list-title"},"分类名称"),a("div",{class:"list-date"},"分类排序"),a("div",{class:"list-action"},"操作")],-1)),(c(!0),n(h,null,D(_.value,t=>(c(),n("div",{key:t._id,class:"list-section"},[a("div",{class:j(["list-title",t.is_delete?"text-red-500 line-through":""])},k(t.cate_name),3),a("div",I,k(t.cate_order),1),a("div",O,[H(l,{to:`/backend/category/modify/${t._id}`,class:"badge badge-success"},{default:z(()=>s[0]||(s[0]=[E("编辑")])),_:2,__:[0]},1032,["to"]),t.cate_num?q("",!0):(c(),n(h,{key:0},[t.is_delete?(c(),n("a",{key:0,href:"javascript:;",onClick:P=>x(t._id)},"恢复",8,Q)):(c(),n("a",{key:1,href:"javascript:;",onClick:P=>M(t._id)},"删除",8,U))],64))])]))),128))])])}}});export{ee as default};
