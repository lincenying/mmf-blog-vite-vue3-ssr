import{u as f}from"./use-global-category-store-CvhW7WrR.js";import{d as L,u as M,P as B,s as v,t as h,k as D,l as N,I as R,r as V,h as j,o as n,c,b as a,F as m,q as F,D as d,v as q,j as k,e as z,w as E,i as H,x as I,C}from"./main-CTY4IKlK.js";import{u as A}from"./vue.8fc199ce-Bmv443Wm.js";const G={class:"card settings-main"},J={class:"settings-main-content"},K={class:"list-time"},O={class:"list-action"},Q=["onClick"],U=["onClick"],Z=L({name:"BackendCategoryList",asyncData(u){const{store:i,route:r,api:o}=u;return f(i).getCategoryList({limit:99,path:r.fullPath},o)},__name:"backend-category-list",setup(u){const i=M(),r=B(),o=f(),g=v(o),_=h(g,"lists"),S=v(r),b=h(S,"historyPageScrollTop");D();const[w,p]=N(!1);async function T(e){w.value||(p(!0),await o.getCategoryList({page:e,limit:99,path:i.fullPath},d),p(!1))}R(()=>{if(_.value.length===0)T(1);else{const e=b.value[i.path]||0;window.scrollTo(0,e)}});async function P(e){const{code:s,message:l}=await d.get("backend/category/recover",{id:e});s===200&&(C({type:"success",content:l}),o.recoverCategory(e))}async function x(e){const{code:s,message:l}=await d.get("backend/category/delete",{id:e});s===200&&(C({type:"success",content:l}),o.deleteCategory(e))}const y=V("分类列表 - M.M.F 小屋");return A({title:y,meta:[{name:"description",content:y}]}),(e,s)=>{const l=j("router-link");return n(),c("div",G,[a("div",J,[s[1]||(s[1]=a("div",{class:"list-section list-header"},[a("div",{class:"list-title"},"分类名称"),a("div",{class:"list-date"},"分类排序"),a("div",{class:"list-action"},"操作")],-1)),(n(!0),c(m,null,F(_.value,t=>(n(),c("div",{key:t._id,class:"list-section"},[a("div",{class:q(["list-title",t.is_delete?"text-red-500 line-through":""])},k(t.cate_name),3),a("div",K,k(t.cate_order),1),a("div",O,[z(l,{to:`/backend/category/modify/${t._id}`,class:"badge badge-success"},{default:E(()=>s[0]||(s[0]=[H("编辑")])),_:2},1032,["to"]),t.cate_num?I("",!0):(n(),c(m,{key:0},[t.is_delete?(n(),c("a",{key:0,href:"javascript:;",onClick:$=>P(t._id)},"恢复",8,Q)):(n(),c("a",{key:1,href:"javascript:;",onClick:$=>x(t._id)},"删除",8,U))],64))])]))),128))])])}}});export{Z as default};
