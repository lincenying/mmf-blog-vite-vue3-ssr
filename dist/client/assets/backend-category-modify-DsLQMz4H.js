import{_ as h}from"./a-input.vue_vue_type_script_setup_true_lang-CRaCe_Fj.js";import{d as w,x as T,J as V,y as B,F as R,q as S,h as N,ae as D,g as F,r as I,a2 as L,K as P,o as U,c as $,a,L as l,M as u,w as g,u as i,G as y,a5 as j}from"./vendor-jIaj2nu_.js";import{u as b}from"./use-global-category-store-DLbO-MRv.js";import{s as k,c as q}from"./main-IxFLig3x.js";/* empty css               */const E={class:"settings-main card"},G={class:"settings-main-content"},H={class:"settings-footer"},Q=w({name:"BackendCategoryModify",asyncData(m){const{store:c,route:s,api:n}=m;return b(c).getCategoryItem({path:s.fullPath,id:s.params.id},n)},__name:"backend-category-modify",setup(m){const c=T(),s=V(),n=b(),p=B(n),C=R(p,"item"),[v,_]=S(!1),t=N({id:c.params.id,cate_name:"",cate_order:""});D(C.value,o=>{o.data&&(t.cate_name=o.data.cate_name,t.cate_order=o.data.cate_order)}),F(async()=>{});async function x(){if(!t.cate_name||!t.cate_order){k("请将表单填写完整!");return}if(v.value)return;_(!0);const{code:o,data:e,message:r}=await q.post("backend/category/modify",t);_(!1),o===200&&(k({type:"success",content:r}),n.updateCategoryItem(e),s.push("/backend/category/list"))}const f=I("编辑分类 - M.M.F 小屋");return L({title:f,meta:[{name:"description",content:f}]}),(o,e)=>{const r=h,M=P("router-link");return U(),$("div",E,[a("div",G,[l(r,{title:"分类名称"},{default:u(()=>[g(a("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>i(t).cate_name=d),type:"text",placeholder:"分类名称",class:"base-input",name:"cate_name"},null,512),[[y,i(t).cate_name]]),e[2]||(e[2]=a("span",{class:"input-info error"},"请输入分类名称",-1))]),_:1}),l(r,{title:"分类排序"},{default:u(()=>[g(a("input",{"onUpdate:modelValue":e[1]||(e[1]=d=>i(t).cate_order=d),type:"text",placeholder:"分类排序",class:"base-input",name:"cate_order"},null,512),[[y,i(t).cate_order]]),e[3]||(e[3]=a("span",{class:"input-info error"},"请输入分类排序",-1))]),_:1})]),a("div",H,[a("a",{href:"javascript:;",class:"btn btn-yellow",onClick:x},"编辑分类"),l(M,{to:"/backend/category/list",class:"btn btn-blue"},{default:u(()=>e[4]||(e[4]=[j("返回")])),_:1})])])}}});export{Q as default};
