import{_ as x}from"./a-input.vue_vue_type_script_setup_true_lang-oFZQFnI9.js";import{d as M,u as T,N as V,s as B,t as N,l as R,A as S,U as D,I,r as U,h as H,o as P,c as $,b as a,e as d,w as u,G as g,p as i,H as y,i as j,C as b,D as A}from"./main-CTY4IKlK.js";import{u as C}from"./use-global-category-store-CvhW7WrR.js";import{u as E}from"./vue.8fc199ce-Bmv443Wm.js";const F={class:"settings-main card"},G={class:"settings-main-content"},L={class:"settings-footer"},O=M({name:"BackendCategoryModify",asyncData(m){const{store:c,route:s,api:n}=m;return C(c).getCategoryItem({path:s.fullPath,id:s.params.id},n)},__name:"backend-category-modify",setup(m){const c=T(),s=V(),n=C(),p=B(n),k=N(p,"item"),[v,_]=R(!1),t=S({id:c.params.id,cate_name:"",cate_order:""});D(k.value,o=>{o.data&&(t.cate_name=o.data.cate_name,t.cate_order=o.data.cate_order)}),I(async()=>{});async function h(){if(!t.cate_name||!t.cate_order){b("请将表单填写完整!");return}if(v.value)return;_(!0);const{code:o,data:e,message:r}=await A.post("backend/category/modify",t);_(!1),o===200&&(b({type:"success",content:r}),n.updateCategoryItem(e),s.push("/backend/category/list"))}const f=U("编辑分类 - M.M.F 小屋");return E({title:f,meta:[{name:"description",content:f}]}),(o,e)=>{const r=x,w=H("router-link");return P(),$("div",F,[a("div",G,[d(r,{title:"分类名称"},{default:u(()=>[g(a("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>i(t).cate_name=l),type:"text",placeholder:"分类名称",class:"base-input",name:"cate_name"},null,512),[[y,i(t).cate_name]]),e[2]||(e[2]=a("span",{class:"input-info error"},"请输入分类名称",-1))]),_:1}),d(r,{title:"分类排序"},{default:u(()=>[g(a("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>i(t).cate_order=l),type:"text",placeholder:"分类排序",class:"base-input",name:"cate_order"},null,512),[[y,i(t).cate_order]]),e[3]||(e[3]=a("span",{class:"input-info error"},"请输入分类排序",-1))]),_:1})]),a("div",L,[a("a",{href:"javascript:;",class:"btn btn-yellow",onClick:h},"编辑分类"),d(w,{to:"/backend/category/list",class:"btn btn-blue"},{default:u(()=>e[4]||(e[4]=[j("返回")])),_:1})])])}}});export{O as default};
