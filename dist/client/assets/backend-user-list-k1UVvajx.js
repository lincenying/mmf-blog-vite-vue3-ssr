import{d as M,y as h,F as k,q as N,g as P,x as L,r as V,a2 as j,c as a,o,b as r,a as B,a3 as D,a8 as R,a9 as F,u as y,M as H,H as q,a6 as u,af as z,J as E,K as J,a5 as K}from"./vendor-MhFm0oL3.js";import{u as S}from"./use-backend-user-store-DeLh6ZHH.js";import{f as A,u as G,c as C,s as b}from"./main-DJ1GBfWU.js";/* empty css               */const I={class:"settings-main card"},O={class:"settings-main-content"},Q={class:"list-email"},W={class:"list-date"},X={class:"list-action"},Y=["onClick"],Z=["onClick"],ee={key:0,class:"settings-footer"},se={key:1,class:"admin-load-more",href:"javascript:;"},ie=M({name:"BackendUserList",asyncData(_){const{store:c,route:d,api:n}=_;return S(c).getUserList({page:1,path:d.fullPath},n)},__name:"backend-user-list",setup(_){const c=L(),d=A(),n=S(),p=h(n),l=k(p,"lists"),T=h(d),U=k(T,"historyPageScrollTop");G();const[v,f]=N(!1);async function m(e=l.value.page){v.value||(f(!0),await n.getUserList({page:e,path:c.fullPath}),f(!1))}async function w(e){const{code:s,message:i}=await C.get("backend/user/recover",{id:e});s===200&&(b({type:"success",content:i}),n.recoverUser(e))}async function x(e){const{code:s,message:i}=await C.get("backend/user/delete",{id:e});s===200&&(b({type:"success",content:i}),n.deleteUser(e))}P(()=>{if(l.value.path==="")m(1);else{const e=U.value[c.path]||0;window.scrollTo(0,e)}});const g=V("用户列表 - M.M.F 小屋");return j({title:g,meta:[{name:"description",content:g}]}),(e,s)=>{const i=H("router-link");return o(),a("div",I,[r("div",O,[s[2]||(s[2]=D('<div class="list-section list-header"><div class="list-username">用户名</div><div class="list-email">邮箱</div><div class="list-date">时间</div><div class="list-action">操作</div></div>',1)),(o(!0),a(R,null,F(l.value.data,t=>(o(),a("div",{key:t._id,class:"list-section"},[r("div",{class:q(["list-username",t.is_delete?"text-red-500 line-through":""])},u(t.username),3),r("div",Q,u(t.email),1),r("div",W,u(y(z)(t.update_date)),1),r("div",X,[E(i,{to:`/backend/user/modify/${t._id}`,class:"badge badge-success"},{default:J(()=>s[1]||(s[1]=[K("编辑")])),_:2,__:[1]},1032,["to"]),t.is_delete?(o(),a("a",{key:0,href:"javascript:;",onClick:$=>w(t._id)},"恢复",8,Y)):(o(),a("a",{key:1,href:"javascript:;",onClick:$=>x(t._id)},"删除",8,Z))])]))),128))]),l.value.hasNext?(o(),a("div",ee,[y(v)?(o(),a("a",se,"加载中...")):(o(),a("a",{key:0,class:"admin-load-more",href:"javascript:;",onClick:s[0]||(s[0]=t=>m())},"加载更多"))])):B("",!0)])}}});export{ie as default};
