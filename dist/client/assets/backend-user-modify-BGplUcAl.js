import{_ as M}from"./a-input.vue_vue_type_script_setup_true_lang-BxWe9euv.js";import{d as V,x as T,J as h,y as B,F as C,q as R,h as S,ae as N,g as D,r as F,a2 as I,K as L,o as P,c as $,a as s,L as d,M as m,w as c,u as n,G as f,a5 as j}from"./vendor-DKdHTvZr.js";import{u as y}from"./use-backend-user-store-QSrJOhV7.js";import{s as v,c as q}from"./main-Bv-ZqgeW.js";/* empty css               */const E={class:"settings-main card"},G={class:"settings-main-content"},H={class:"settings-footer"},Q=V({name:"BackendUserModify",asyncData(b){const{store:p,route:l,api:u}=b;return y(p).getUserItem({id:l.params.id,path:l.fullPath,from:"backend"},u)},__name:"backend-user-modify",setup(b){const p=T(),l=h(),u=y(),_=B(u),o=C(_,"item"),[w,k]=R(!1),a=S({id:p.params.id,username:"",email:"",password:""});N(o.value,t=>{t.data&&(a.username=t.data.username,a.email=t.data.email)}),D(async()=>{o.value&&o.value.data&&(a.username=o.value.data.username,a.email=o.value.data.email)});async function U(){if(!a.username||!a.email){v("请将表单填写完整!");return}if(w.value)return;k(!0);const{code:t,data:e,message:r}=await q.post("backend/user/modify",a);k(!1),t===200&&(v({type:"success",content:r}),u.updateUserItem(e),l.push("/backend/user/list"))}const g=F("用户编辑 - M.M.F 小屋");return I({title:g,meta:[{name:"description",content:g}]}),(t,e)=>{const r=M,x=L("router-link");return P(),$("div",E,[s("div",G,[s("form",null,[d(r,{title:"昵称"},{default:m(()=>[c(s("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>n(a).username=i),type:"text",placeholder:"昵称",class:"base-input",name:"username"},null,512),[[f,n(a).username]]),e[3]||(e[3]=s("span",{class:"input-info error"},"请输入昵称",-1))]),_:1}),d(r,{title:"邮箱"},{default:m(()=>[c(s("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>n(a).email=i),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[f,n(a).email]]),e[4]||(e[4]=s("span",{class:"input-info error"},"请输入邮箱",-1))]),_:1}),d(r,{title:"密码"},{default:m(()=>[c(s("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>n(a).password=i),type:"password",placeholder:"密码",class:"base-input",name:"password"},null,512),[[f,n(a).password]]),e[5]||(e[5]=s("span",{class:"input-info error"},"请输入密码",-1))]),_:1})])]),s("div",H,[s("a",{href:"javascript:;",class:"btn btn-yellow",onClick:U},"编辑用户"),d(x,{to:"/backend/user/list",class:"btn btn-blue"},{default:m(()=>e[6]||(e[6]=[j("返回")])),_:1})])])}}});export{Q as default};
