import{_ as M}from"./a-input.vue_vue_type_script_setup_true_lang-vtPVtJw7.js";import{d as V,y as T,F as h,q as B,h as C,x as N,ae as R,g as S,r as D,a2 as F,c as I,o as P,b as t,J as d,K as m,w as c,G as f,u as n,a5 as $,M as j,N as q}from"./vendor-BNfFymli.js";import{u as y}from"./use-backend-user-store-DvS65OY-.js";import{s as v,c as E}from"./main-C-aJ0Mow.js";/* empty css               */const G={class:"settings-main card"},H={class:"settings-main-content"},J={class:"settings-footer"},Q=V({name:"BackendUserModify",asyncData(_){const{store:p,route:l,api:u}=_;return y(p).getUserItem({id:l.params.id,path:l.fullPath,from:"backend"},u)},__name:"backend-user-modify",setup(_){const p=N(),l=q(),u=y(),b=T(u),o=h(b,"item"),[w,k]=B(!1),a=C({id:p.params.id,username:"",email:"",password:""});R(o.value,s=>{s.data&&(a.username=s.data.username,a.email=s.data.email)},{immediate:!0}),S(async()=>{o.value&&o.value.data&&(a.username=o.value.data.username,a.email=o.value.data.email)});async function U(){if(!a.username||!a.email){v("请将表单填写完整!");return}if(w.value)return;k(!0);const{code:s,data:e,message:r}=await E.post("backend/user/modify",a);k(!1),s===200&&(v({type:"success",content:r}),u.updateUserItem(e),l.push("/backend/user/list"))}const g=D("用户编辑 - M.M.F 小屋");return F({title:g,meta:[{name:"description",content:g}]}),(s,e)=>{const r=M,x=j("router-link");return P(),I("div",G,[t("div",H,[t("form",null,[d(r,{title:"昵称"},{default:m(()=>[c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>n(a).username=i),type:"text",placeholder:"昵称",class:"base-input",name:"username"},null,512),[[f,n(a).username]]),e[3]||(e[3]=t("span",{class:"input-info error"},"请输入昵称",-1))]),_:1,__:[3]}),d(r,{title:"邮箱"},{default:m(()=>[c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>n(a).email=i),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[f,n(a).email]]),e[4]||(e[4]=t("span",{class:"input-info error"},"请输入邮箱",-1))]),_:1,__:[4]}),d(r,{title:"密码"},{default:m(()=>[c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>n(a).password=i),type:"password",placeholder:"密码",class:"base-input",name:"password"},null,512),[[f,n(a).password]]),e[5]||(e[5]=t("span",{class:"input-info error"},"请输入密码",-1))]),_:1,__:[5]})])]),t("div",J,[t("a",{href:"javascript:;",class:"btn btn-yellow",onClick:U},"编辑用户"),d(x,{to:"/backend/user/list",class:"btn btn-blue"},{default:m(()=>e[6]||(e[6]=[$("返回")])),_:1,__:[6]})])])}}});export{Q as default};
