import{_ as x}from"./a-input.vue_vue_type_script_setup_true_lang-gsShgKbE.js";import{d as V,s as h,B,w as T,h as C,q as R,ah as S,o as N,r as D,a2 as F,c as I,g as t,K as d,L as m,M as L,J as P,f as $,F as c,G as f,u as n,a5 as j}from"./vendor-C8cObGch.js";import{u as v}from"./use-backend-user-store-Bm1K6V6i.js";import{s as w,c as q}from"./main-Bpljy6lB.js";/* empty css               */const E={class:"settings-main card"},G={class:"settings-main-content"},H={class:"settings-footer"},Q=V({name:"BackendUserModify",asyncData(b){const{store:p,route:l,api:u}=b;return v(p).getUserItem({id:l.params.id,path:l.fullPath,from:"backend"},u)},__name:"backend-user-modify",setup(b){const p=R(),l=L(),u=v(),_=h(u),o=B(_,"item"),[y,k]=T(!1),a=C({id:p.params.id,username:"",email:"",password:""});S(o.value,s=>{s.data&&(a.username=s.data.username,a.email=s.data.email)},{immediate:!0}),N(async()=>{o.value&&o.value.data&&(a.username=o.value.data.username,a.email=o.value.data.email)});async function U(){if(!a.username||!a.email){w("请将表单填写完整!");return}if(y.value)return;k(!0);const{code:s,data:e,message:r}=await q.post("backend/user/modify",a);k(!1),s===200&&(w({type:"success",content:r}),u.updateUserItem(e),l.push("/backend/user/list"))}const g=D("用户编辑 - M.M.F 小屋");return F({title:g,meta:[{name:"description",content:g}]}),(s,e)=>{const r=x,M=P("router-link");return $(),I("div",E,[t("div",G,[t("form",null,[d(r,{title:"昵称"},{default:m(()=>[c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>n(a).username=i),type:"text",placeholder:"昵称",class:"base-input",name:"username"},null,512),[[f,n(a).username]]),e[3]||(e[3]=t("span",{class:"input-info error"},"请输入昵称",-1))]),_:1}),d(r,{title:"邮箱"},{default:m(()=>[c(t("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>n(a).email=i),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[f,n(a).email]]),e[4]||(e[4]=t("span",{class:"input-info error"},"请输入邮箱",-1))]),_:1}),d(r,{title:"密码"},{default:m(()=>[c(t("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>n(a).password=i),type:"password",placeholder:"密码",class:"base-input",name:"password"},null,512),[[f,n(a).password]]),e[5]||(e[5]=t("span",{class:"input-info error"},"请输入密码",-1))]),_:1})])]),t("div",H,[t("a",{href:"javascript:;",class:"btn btn-yellow",onClick:U},"编辑用户"),d(M,{to:"/backend/user/list",class:"btn btn-blue"},{default:m(()=>[...e[6]||(e[6]=[j("返回",-1)])]),_:1})])])}}});export{Q as default};
