import{_ as M}from"./a-input.vue_vue_type_script_setup_true_lang-CpKf6M5b.js";import{d as V,y as T,F as h,q as B,h as C,x as N,ae as R,g as S,r as D,a2 as F,c as I,o as P,b as s,J as d,K as m,w as c,G as f,u as n,a5 as $,M as j,N as q}from"./vendor-C9sq69wz.js";import{u as y}from"./use-backend-user-store-cRfGoKWw.js";import{s as v,c as E}from"./main-WEfp_hYm.js";/* empty css               */const G={class:"settings-main card"},H={class:"settings-main-content"},J={class:"settings-footer"},Q=V({name:"BackendUserModify",asyncData(b){const{store:p,route:l,api:u}=b;return y(p).getUserItem({id:l.params.id,path:l.fullPath,from:"backend"},u)},__name:"backend-user-modify",setup(b){const p=N(),l=q(),u=y(),_=T(u),o=h(_,"item"),[w,k]=B(!1),a=C({id:p.params.id,username:"",email:"",password:""});R(o.value,t=>{t.data&&(a.username=t.data.username,a.email=t.data.email)}),S(async()=>{o.value&&o.value.data&&(a.username=o.value.data.username,a.email=o.value.data.email)});async function U(){if(!a.username||!a.email){v("请将表单填写完整!");return}if(w.value)return;k(!0);const{code:t,data:e,message:r}=await E.post("backend/user/modify",a);k(!1),t===200&&(v({type:"success",content:r}),u.updateUserItem(e),l.push("/backend/user/list"))}const g=D("用户编辑 - M.M.F 小屋");return F({title:g,meta:[{name:"description",content:g}]}),(t,e)=>{const r=M,x=j("router-link");return P(),I("div",G,[s("div",H,[s("form",null,[d(r,{title:"昵称"},{default:m(()=>[c(s("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>n(a).username=i),type:"text",placeholder:"昵称",class:"base-input",name:"username"},null,512),[[f,n(a).username]]),e[3]||(e[3]=s("span",{class:"input-info error"},"请输入昵称",-1))]),_:1}),d(r,{title:"邮箱"},{default:m(()=>[c(s("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>n(a).email=i),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[f,n(a).email]]),e[4]||(e[4]=s("span",{class:"input-info error"},"请输入邮箱",-1))]),_:1}),d(r,{title:"密码"},{default:m(()=>[c(s("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>n(a).password=i),type:"password",placeholder:"密码",class:"base-input",name:"password"},null,512),[[f,n(a).password]]),e[5]||(e[5]=s("span",{class:"input-info error"},"请输入密码",-1))]),_:1})])]),s("div",J,[s("a",{href:"javascript:;",class:"btn btn-yellow",onClick:U},"编辑用户"),d(x,{to:"/backend/user/list",class:"btn btn-blue"},{default:m(()=>e[6]||(e[6]=[$("返回")])),_:1})])])}}});export{Q as default};
