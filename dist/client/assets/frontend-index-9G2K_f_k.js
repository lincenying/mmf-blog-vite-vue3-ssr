import{_ as T,C as S,a as b,b as R}from"./vue-content-loader.es-tzqubSEG.js";import{u as k,_ as A}from"./use-frontend-article-store-BOVOJ0x2.js";import{v as e,u as D,s as x,a as L,b as F}from"./main-BBnOZaJ_.js";import{u as E}from"./use-global-category-store-BpjaM1BR.js";import{u as I}from"./vue.8fc199ce-DvXPQa2A.js";const P={class:"card feed"},M={class:"feed-content"},j={class:"feed-desc-wrap"},z={class:"feed-article-content markdown-body"},H=e.defineComponent({name:"TopicsItemNone",__name:"topics-item-none",setup(i){return(o,l)=>(e.openBlock(),e.createElementBlock("div",P,[e.createElementVNode("div",M,[e.createElementVNode("div",j,[e.createElementVNode("div",z,[e.renderSlot(o.$slots,"default")])])])]))}}),q={class:"card feed"},G={class:"feed-content"},J={class:"feed-source-time"},K={class:"feed-source"},O={class:"feed-time"},Q={class:"feed-main-link-wrap"},U={class:"feed-desc-wrap"},W={class:"feed-article-content markdown-body"},X=e.defineComponent({name:"TopicsItem",__name:"topics-item",props:{item:{}},setup(i){const o=i,l=e.toRefs(o),t=e.toRef(l,"item");return(d,r)=>{const s=e.resolveComponent("router-link"),a=T;return e.openBlock(),e.createElementBlock("div",q,[e.createElementVNode("div",G,[e.createElementVNode("div",J,[e.createElementVNode("span",K,[r[0]||(r[0]=e.createTextVNode("来自分类 ")),e.createVNode(s,{to:`/category/${t.value.category}`,class:"feed-minor-link"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.value.category_name),1)]),_:1},8,["to"])]),e.createElementVNode("span",O,e.toDisplayString(t.value.update_date),1)]),e.createElementVNode("div",Q,[e.createVNode(s,{to:`/article/${t.value._id}`,class:"feed-main-link"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.value.title),1)]),_:1},8,["to"])]),e.createElementVNode("div",U,[e.createElementVNode("div",W,e.toDisplayString(t.value.content),1)])]),e.createVNode(a,{item:t.value},null,8,["item"])])}}}),Y={class:"main wrap"},Z={class:"main-left"},ee={class:"cards-wrap home-feeds"},te={key:0,class:"card card-content-loader"},oe={class:"load-more-wrap"},ne={class:"main-right"},ie=e.defineComponent({name:"FrontendIndex",asyncData(i){const{store:o,route:l,api:t}=i,{params:{id:d,key:r,by:s},fullPath:a}=l,u=E(o),m=k(o);return Promise.all([u.getCategoryList({},t),m.getTrending(void 0,t),m.getArticleList({page:1,limit:10,id:d,path:a,key:r,by:s},t)])},__name:"frontend-index",setup(i){const o=D(),l=E(),t=x(l),d=e.toRef(t,"lists"),r=k(),s=x(r),a=e.toRef(s,"lists"),u=e.toRef(s,"trending");L();const{params:{id:m,key:$,by:w},path:B}=o,[f,v]=F(!1);async function N(c=a.value.page){f.value||(v(!0),await r.getArticleList({page:c,limit:10,id:m,path:B,key:$,by:w}),v(!1))}e.onActivated(()=>{console.log(`frontend-index onActivated:${o.path}`),a.value.path!==o.path&&N(1)});const V=e.computed(()=>{let c="M.M.F 小屋";const{id:n,key:_,by:h}=o.params;if(n){const p=d.value.find(g=>g._id===n);p&&(c=`${p.cate_name} - ${c}`)}else _?c=`搜索: ${_} - ${c}`:h&&(c=`热门 - ${c}`);return c});return I({title:V,meta:[{name:"description",content:V}]}),(c,n)=>{const _=X,h=H,p=b,g=A,C=R;return e.openBlock(),e.createElementBlock("div",Y,[e.createElementVNode("div",Z,[e.createElementVNode("div",ee,[a.value.path?a.value.data.length>0?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.value.data,y=>(e.openBlock(),e.createBlock(_,{key:y._id,item:y},null,8,["item"]))),128)),e.createElementVNode("div",oe,[a.value.hasNext?(e.openBlock(),e.createElementBlock("a",{key:0,href:"javascript:;",class:e.normalizeClass(["load-more",e.unref(f)?"loading":""]),onClick:n[0]||(n[0]=y=>N())},[e.createTextVNode(e.toDisplayString(e.unref(f)?"加载中":"更多")+" ",1),n[2]||(n[2]=e.createElementVNode("i",{class:"icon icon-circle-loading"},null,-1))],2)):e.createCommentVNode("",!0)])],64)):(e.openBlock(),e.createBlock(h,{key:2},{default:e.withCtx(()=>n[3]||(n[3]=[e.createTextVNode("当前分类还没有文章...")])),_:1})):(e.openBlock(),e.createElementBlock("div",te,[e.createVNode(e.unref(S),{height:160,width:660,speed:2,"primary-color":"#f3f3f3","secondary-color":"#ecebeb"},{default:e.withCtx(()=>n[1]||(n[1]=[e.createElementVNode("rect",{x:"70",y:"15",rx:"4",ry:"4",width:"117",height:"6.4"},null,-1),e.createTextVNode(),e.createElementVNode("rect",{x:"70",y:"35",rx:"3",ry:"3",width:"85",height:"6.4"},null,-1),e.createElementVNode("rect",{x:"0",y:"80",rx:"3",ry:"3",width:"550",height:"6.4"},null,-1),e.createTextVNode(),e.createElementVNode("rect",{x:"0",y:"100",rx:"3",ry:"3",width:"620",height:"6.4"},null,-1),e.createElementVNode("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"401",height:"6.4"},null,-1),e.createTextVNode(),e.createElementVNode("rect",{x:"0",y:"140",rx:"3",ry:"3",width:"501",height:"6.4"},null,-1),e.createElementVNode("circle",{cx:"30",cy:"30",r:"30"},null,-1)])),_:1})]))])]),e.createElementVNode("div",ne,[e.createVNode(p,{category:d.value},null,8,["category"]),e.createVNode(g,{trending:u.value},null,8,["trending"]),e.createVNode(C)])])}}});export{ie as default};
