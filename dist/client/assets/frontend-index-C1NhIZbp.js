import{_ as D,a as H,b as q}from"./item-actions.vue_vue_type_script_setup_true_lang-DuGA_trT.js";import{u as B,_ as E}from"./use-frontend-article-store-D09boD-O.js";import{d as T,c as d,o as i,b as e,a4 as J,t as K,F as v,M as O,J as _,a5 as r,K as $,a6 as f,y as F,x as G,q as Q,z as U,k as W,a2 as X,O as I,u as S,a7 as Y,a8 as M,a9 as Z,a as ee,H as te}from"./vendor-CjYDLnoj.js";import{u as P}from"./use-global-category-store-CvJ2nzcY.js";import{u as se}from"./main-XRXMnjAW.js";/* empty css               */const oe={class:"card feed"},ae={class:"feed-content"},ne={class:"feed-desc-wrap"},ie={class:"feed-article-content markdown-body"},re=T({name:"TopicsItemNone",__name:"topics-item-none",setup(u){return(o,m)=>(i(),d("div",oe,[e("div",ae,[e("div",ne,[e("div",ie,[J(o.$slots,"default")])])])]))}}),ce={class:"card feed"},le={class:"feed-content"},de={class:"feed-source-time"},_e={class:"feed-source"},me={class:"feed-time"},ue={class:"feed-main-link-wrap"},pe={class:"feed-desc-wrap"},fe={class:"feed-article-content markdown-body"},he=T({name:"TopicsItem",__name:"topics-item",props:{item:{}},setup(u){const m=K(u),t=v(m,"item");return(p,c)=>{const l=O("router-link"),a=D;return i(),d("div",ce,[e("div",le,[e("div",de,[e("span",_e,[c[0]||(c[0]=r("来自分类 ",-1)),_(l,{to:`/category/${t.value.category}`,class:"feed-minor-link"},{default:$(()=>[r(f(t.value.category_name),1)]),_:1},8,["to"])]),e("span",me,f(t.value.update_date),1)]),e("div",ue,[_(l,{to:`/article/${t.value._id}`,class:"feed-main-link"},{default:$(()=>[r(f(t.value.title),1)]),_:1},8,["to"])]),e("div",pe,[e("div",fe,f(t.value.content),1)])]),_(a,{item:t.value},null,8,["item"])])}}}),ge={class:"main wrap"},ye={class:"main-left"},ve={class:"cards-wrap home-feeds"},$e={key:0,class:"card card-content-loader"},xe={class:"load-more-wrap"},ke={class:"main-right"},Le=T({name:"FrontendIndex",asyncData(u){const{store:o,route:m,api:t}=u,{params:{id:p,key:c,by:l},fullPath:a}=m,x=P(o),h=B(o);return Promise.all([x.getCategoryList({},t),h.getTrending(void 0,t),h.getArticleList({page:1,limit:10,id:p,path:a,key:c,by:l},t)])},__name:"frontend-index",setup(u){const o=G(),m=P(),t=F(m),p=v(t,"lists"),c=B(),l=F(c),a=v(l,"lists"),x=v(l,"trending");se();const{params:{id:h,key:R,by:V},path:j}=o,[k,A]=Q(!1);async function L(n=a.value.page){k.value||(A(!0),await c.getArticleList({page:n,limit:10,id:h,path:j,key:R,by:V}),A(!1))}U(()=>{console.log(`frontend-index onActivated:${o.path}`),a.value.path!==o.path&&L(1)});const N=W(()=>{let n="M.M.F 小屋";const{id:s,key:g,by:w}=o.params;if(s){const y=p.value.find(b=>b._id===s);y&&(n=`${y.cate_name} - ${n}`)}else g?n=`搜索: ${g} - ${n}`:w&&(n=`热门 - ${n}`);return n});return X({title:N,meta:[{name:"description",content:N}]}),(n,s)=>{const g=he,w=re,y=H,b=E,z=q;return i(),d("div",ge,[e("div",ye,[e("div",ve,[a.value.path?a.value.data.length>0?(i(),d(M,{key:1},[(i(!0),d(M,null,Z(a.value.data,C=>(i(),I(g,{key:C._id,item:C},null,8,["item"]))),128)),e("div",xe,[a.value.hasNext?(i(),d("a",{key:0,href:"javascript:;",class:te(["load-more",S(k)?"loading":""]),onClick:s[0]||(s[0]=C=>L())},[r(f(S(k)?"加载中":"更多")+" ",1),s[2]||(s[2]=e("i",{class:"icon icon-circle-loading"},null,-1))],2)):ee("",!0)])],64)):(i(),I(w,{key:2},{default:$(()=>[...s[3]||(s[3]=[r("当前分类还没有文章...",-1)])]),_:1})):(i(),d("div",$e,[_(S(Y),{height:160,width:660,speed:2,"primary-color":"#f3f3f3","secondary-color":"#ecebeb"},{default:$(()=>[...s[1]||(s[1]=[e("rect",{x:"70",y:"15",rx:"4",ry:"4",width:"117",height:"6.4"},null,-1),r(),e("rect",{x:"70",y:"35",rx:"3",ry:"3",width:"85",height:"6.4"},null,-1),e("rect",{x:"0",y:"80",rx:"3",ry:"3",width:"550",height:"6.4"},null,-1),r(),e("rect",{x:"0",y:"100",rx:"3",ry:"3",width:"620",height:"6.4"},null,-1),e("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"401",height:"6.4"},null,-1),r(),e("rect",{x:"0",y:"140",rx:"3",ry:"3",width:"501",height:"6.4"},null,-1),e("circle",{cx:"30",cy:"30",r:"30"},null,-1)])]),_:1})]))])]),e("div",ke,[_(y,{category:p.value},null,8,["category"]),_(b,{trending:x.value},null,8,["trending"]),_(z)])])}}});export{Le as default};
