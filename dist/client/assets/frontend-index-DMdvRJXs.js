import{_ as q,C as z,a as E,b as H}from"./vue-content-loader.es-UiczhdIO.js";import{u as B,_ as G}from"./use-frontend-article-store-VM_8Qz1e.js";import{d as T,o as i,c as d,b as e,f as J,g as K,t as v,h as O,i as r,e as _,w as $,j as f,u as Q,s as F,k as U,l as W,m as X,n as Y,p as S,F as I,q as Z,v as ee,x as te,y as P}from"./main-CTY4IKlK.js";import{u as R}from"./use-global-category-store-CvhW7WrR.js";import{u as se}from"./vue.8fc199ce-Bmv443Wm.js";const oe={class:"card feed"},ne={class:"feed-content"},ae={class:"feed-desc-wrap"},ie={class:"feed-article-content markdown-body"},re=T({name:"TopicsItemNone",__name:"topics-item-none",setup(u){return(o,m)=>(i(),d("div",oe,[e("div",ne,[e("div",ae,[e("div",ie,[J(o.$slots,"default")])])])]))}}),ce={class:"card feed"},le={class:"feed-content"},de={class:"feed-source-time"},_e={class:"feed-source"},me={class:"feed-time"},ue={class:"feed-main-link-wrap"},pe={class:"feed-desc-wrap"},fe={class:"feed-article-content markdown-body"},he=T({name:"TopicsItem",__name:"topics-item",props:{item:{}},setup(u){const m=K(u),t=v(m,"item");return(p,c)=>{const l=O("router-link"),n=q;return i(),d("div",ce,[e("div",le,[e("div",de,[e("span",_e,[c[0]||(c[0]=r("来自分类 ")),_(l,{to:`/category/${t.value.category}`,class:"feed-minor-link"},{default:$(()=>[r(f(t.value.category_name),1)]),_:1},8,["to"])]),e("span",me,f(t.value.update_date),1)]),e("div",ue,[_(l,{to:`/article/${t.value._id}`,class:"feed-main-link"},{default:$(()=>[r(f(t.value.title),1)]),_:1},8,["to"])]),e("div",pe,[e("div",fe,f(t.value.content),1)])]),_(n,{item:t.value},null,8,["item"])])}}}),ge={class:"main wrap"},ye={class:"main-left"},ve={class:"cards-wrap home-feeds"},$e={key:0,class:"card card-content-loader"},xe={class:"load-more-wrap"},ke={class:"main-right"},Ae=T({name:"FrontendIndex",asyncData(u){const{store:o,route:m,api:t}=u,{params:{id:p,key:c,by:l},fullPath:n}=m,x=R(o),h=B(o);return Promise.all([x.getCategoryList({},t),h.getTrending(void 0,t),h.getArticleList({page:1,limit:10,id:p,path:n,key:c,by:l},t)])},__name:"frontend-index",setup(u){const o=Q(),m=R(),t=F(m),p=v(t,"lists"),c=B(),l=F(c),n=v(l,"lists"),x=v(l,"trending");U();const{params:{id:h,key:V,by:j},path:M}=o,[k,A]=W(!1);async function L(a=n.value.page){k.value||(A(!0),await c.getArticleList({page:a,limit:10,id:h,path:M,key:V,by:j}),A(!1))}X(()=>{console.log(`frontend-index onActivated:${o.path}`),n.value.path!==o.path&&L(1)});const N=Y(()=>{let a="M.M.F 小屋";const{id:s,key:g,by:w}=o.params;if(s){const y=p.value.find(b=>b._id===s);y&&(a=`${y.cate_name} - ${a}`)}else g?a=`搜索: ${g} - ${a}`:w&&(a=`热门 - ${a}`);return a});return se({title:N,meta:[{name:"description",content:N}]}),(a,s)=>{const g=he,w=re,y=E,b=G,D=H;return i(),d("div",ge,[e("div",ye,[e("div",ve,[n.value.path?n.value.data.length>0?(i(),d(I,{key:1},[(i(!0),d(I,null,Z(n.value.data,C=>(i(),P(g,{key:C._id,item:C},null,8,["item"]))),128)),e("div",xe,[n.value.hasNext?(i(),d("a",{key:0,href:"javascript:;",class:ee(["load-more",S(k)?"loading":""]),onClick:s[0]||(s[0]=C=>L())},[r(f(S(k)?"加载中":"更多")+" ",1),s[2]||(s[2]=e("i",{class:"icon icon-circle-loading"},null,-1))],2)):te("",!0)])],64)):(i(),P(w,{key:2},{default:$(()=>s[3]||(s[3]=[r("当前分类还没有文章...")])),_:1})):(i(),d("div",$e,[_(S(z),{height:160,width:660,speed:2,"primary-color":"#f3f3f3","secondary-color":"#ecebeb"},{default:$(()=>s[1]||(s[1]=[e("rect",{x:"70",y:"15",rx:"4",ry:"4",width:"117",height:"6.4"},null,-1),r(),e("rect",{x:"70",y:"35",rx:"3",ry:"3",width:"85",height:"6.4"},null,-1),e("rect",{x:"0",y:"80",rx:"3",ry:"3",width:"550",height:"6.4"},null,-1),r(),e("rect",{x:"0",y:"100",rx:"3",ry:"3",width:"620",height:"6.4"},null,-1),e("rect",{x:"0",y:"120",rx:"3",ry:"3",width:"401",height:"6.4"},null,-1),r(),e("rect",{x:"0",y:"140",rx:"3",ry:"3",width:"501",height:"6.4"},null,-1),e("circle",{cx:"30",cy:"30",r:"30"},null,-1)])),_:1})]))])]),e("div",ke,[_(y,{category:p.value},null,8,["category"]),_(b,{trending:x.value},null,8,["trending"]),_(D)])])}}});export{Ae as default};
