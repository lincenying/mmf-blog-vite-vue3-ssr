import{_ as b}from"./a-input.vue_vue_type_script_setup_true_lang-gsShgKbE.js";import{d as h,t as k,B as y,r,o as x,a2 as M,c as B,g as t,K as f,L as _,u as i,f as C,F,G as R,ad as S}from"./vendor-C8cObGch.js";import{a as U,b as V,c as v,s as u}from"./main-Bpljy6lB.js";/* empty css               */const L={class:"cards-wrap home-feeds"},N={class:"card settings-main"},T={class:"settings-main-content"},$=["value"],j={class:"settings-footer"},K=h({name:"FrontendUserAccount",__name:"frontend-user-account",setup(A){const c=U(),g=k(c),d=y(g,"cookies");let l=r(""),s=r("");async function w(){const{code:a,data:e}=await v.get("frontend/user/account",{});a===200&&(l.value=e.username,s.value=e.email)}x(()=>{w()});const m=V(async()=>{const a=/^[\w\-.]+@[\w-]+\.[\w-]+$/;if(s.value){if(!a.test(s.value)){u("邮箱格式错误!");return}}else{u("请填写邮箱地址!");return}const{code:e,message:n}=await v.post("frontend/user/account",{email:s.value,username:l.value,id:d.value.userid});e===200&&(c.setCookies({...d.value,useremail:s.value}),u({type:"success",content:n}))}),p=r("帐号 - M.M.F 小屋");return M({title:p,meta:[{name:"description",content:p}]}),(a,e)=>{const n=b;return C(),B("div",L,[t("div",N,[t("div",T,[t("form",null,[f(n,{title:"昵称"},{default:_(()=>[t("input",{type:"text",value:i(l),placeholder:"昵称",class:"base-input",name:"username",readonly:""},null,8,$),e[2]||(e[2]=t("span",{class:"input-info error"},"请输入昵称",-1))]),_:1}),f(n,{title:"邮箱"},{default:_(()=>[F(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>S(s)?s.value=o:s=o),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[R,i(s)]]),e[3]||(e[3]=t("span",{class:"input-info error"},"请输入邮箱",-1))]),_:1})])]),t("div",j,[t("a",{href:"javascript:;",class:"btn btn-yellow",onClick:e[1]||(e[1]=(...o)=>i(m)&&i(m)(...o))},"保存设置")])])])}}});export{K as default};
