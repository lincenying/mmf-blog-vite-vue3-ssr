import{_ as b}from"./a-input.vue_vue_type_script_setup_true_lang-CRaCe_Fj.js";import{d as h,t as k,F as y,r,g as x,a2 as M,o as C,c as F,a as t,L as f,M as _,u as i,w as B,aa as R,G as S}from"./vendor-jIaj2nu_.js";import{a as U,b as V,s as u,c as v}from"./main-IxFLig3x.js";/* empty css               */const L={class:"cards-wrap home-feeds"},N={class:"card settings-main"},T={class:"settings-main-content"},$=["value"],j={class:"settings-footer"},P=h({name:"FrontendUserAccount",__name:"frontend-user-account",setup(A){const c=U(),w=k(c),d=y(w,"cookies");let l=r(""),s=r("");async function g(){const{code:a,data:e}=await v.get("frontend/user/account",{});a===200&&(l.value=e.username,s.value=e.email)}x(()=>{g()});const m=V(async()=>{const a=/^[\w\-.]+@[\w-]+\.[\w-]+$/;if(s.value){if(!a.test(s.value)){u("邮箱格式错误!");return}}else{u("请填写邮箱地址!");return}const{code:e,message:n}=await v.post("frontend/user/account",{email:s.value,username:l.value,id:d.value.userid});e===200&&(c.setCookies({...d.value,useremail:s.value}),u({type:"success",content:n}))}),p=r("帐号 - M.M.F 小屋");return M({title:p,meta:[{name:"description",content:p}]}),(a,e)=>{const n=b;return C(),F("div",L,[t("div",N,[t("div",T,[t("form",null,[f(n,{title:"昵称"},{default:_(()=>[t("input",{type:"text",value:i(l),placeholder:"昵称",class:"base-input",name:"username",readonly:""},null,8,$),e[2]||(e[2]=t("span",{class:"input-info error"},"请输入昵称",-1))]),_:1}),f(n,{title:"邮箱"},{default:_(()=>[B(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>R(s)?s.value=o:s=o),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[S,i(s)]]),e[3]||(e[3]=t("span",{class:"input-info error"},"请输入邮箱",-1))]),_:1})])]),t("div",j,[t("a",{href:"javascript:;",class:"btn btn-yellow",onClick:e[1]||(e[1]=(...o)=>i(m)&&i(m)(...o))},"保存设置")])])])}}});export{P as default};
