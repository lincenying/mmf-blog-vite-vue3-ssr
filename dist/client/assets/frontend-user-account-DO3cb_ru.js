import{_ as b}from"./a-input.vue_vue_type_script_setup_true_lang-DCKx48uL.js";import{d as h,t as k,F as y,r,g as x,a2 as M,c as C,o as F,b as t,J as f,K as _,u as i,w as B,G as R,aa as S}from"./vendor-BLXAojGb.js";import{a as U,b as V,s as u,c as v}from"./main-BpQZ0DlM.js";/* empty css               */const N={class:"cards-wrap home-feeds"},T={class:"card settings-main"},$={class:"settings-main-content"},j=["value"],A={class:"settings-footer"},K=h({name:"FrontendUserAccount",__name:"frontend-user-account",setup(D){const c=U(),w=k(c),d=y(w,"cookies");let l=r(""),s=r("");async function g(){const{code:a,data:e}=await v.get("frontend/user/account",{});a===200&&(l.value=e.username,s.value=e.email)}x(()=>{g()});const m=V(async()=>{const a=/^[\w\-.]+@[\w-]+\.[\w-]+$/;if(s.value){if(!a.test(s.value)){u("邮箱格式错误!");return}}else{u("请填写邮箱地址!");return}const{code:e,message:n}=await v.post("frontend/user/account",{email:s.value,username:l.value,id:d.value.userid});e===200&&(c.setCookies({...d.value,useremail:s.value}),u({type:"success",content:n}))}),p=r("帐号 - M.M.F 小屋");return M({title:p,meta:[{name:"description",content:p}]}),(a,e)=>{const n=b;return F(),C("div",N,[t("div",T,[t("div",$,[t("form",null,[f(n,{title:"昵称"},{default:_(()=>[t("input",{type:"text",value:i(l),placeholder:"昵称",class:"base-input",name:"username",readonly:""},null,8,j),e[2]||(e[2]=t("span",{class:"input-info error"},"请输入昵称",-1))]),_:1,__:[2]}),f(n,{title:"邮箱"},{default:_(()=>[B(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>S(s)?s.value=o:s=o),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[R,i(s)]]),e[3]||(e[3]=t("span",{class:"input-info error"},"请输入邮箱",-1))]),_:1,__:[3]})])]),t("div",A,[t("a",{href:"javascript:;",class:"btn btn-yellow",onClick:e[1]||(e[1]=(...o)=>i(m)&&i(m)(...o))},"保存设置")])])])}}});export{K as default};
