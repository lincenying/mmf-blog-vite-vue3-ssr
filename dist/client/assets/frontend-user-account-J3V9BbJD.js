import{_ as b}from"./a-input.vue_vue_type_script_setup_true_lang-oFZQFnI9.js";import{d as h,z as k,g as y,t as x,r,I as C,B as M,C as u,D as f,o as B,c as F,b as t,e as _,w as v,p as i,G as R,L as S,H as U}from"./main-CTY4IKlK.js";import{u as V}from"./vue.8fc199ce-Bmv443Wm.js";const D={class:"cards-wrap home-feeds"},H={class:"card settings-main"},L={class:"settings-main-content"},N=["value"],T={class:"settings-footer"},E=h({name:"FrontendUserAccount",__name:"frontend-user-account",setup($){const c=k(),w=y(c),d=x(w,"cookies");let l=r(""),s=r("");async function g(){const{code:a,data:e}=await f.get("frontend/user/account",{});a===200&&(l.value=e.username,s.value=e.email)}C(()=>{g()});const m=M(async()=>{const a=/^[\w\-.]+@[\w-]+\.[\w-]+$/;if(s.value){if(!a.test(s.value)){u("邮箱格式错误!");return}}else{u("请填写邮箱地址!");return}const{code:e,message:n}=await f.post("frontend/user/account",{email:s.value,username:l.value,id:d.value.userid});e===200&&(c.setCookies({...d.value,useremail:s.value}),u({type:"success",content:n}))}),p=r("帐号 - M.M.F 小屋");return V({title:p,meta:[{name:"description",content:p}]}),(a,e)=>{const n=b;return B(),F("div",D,[t("div",H,[t("div",L,[t("form",null,[_(n,{title:"昵称"},{default:v(()=>[t("input",{type:"text",value:i(l),placeholder:"昵称",class:"base-input",name:"username",readonly:""},null,8,N),e[2]||(e[2]=t("span",{class:"input-info error"},"请输入昵称",-1))]),_:1}),_(n,{title:"邮箱"},{default:v(()=>[R(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>S(s)?s.value=o:s=o),type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,512),[[U,i(s)]]),e[3]||(e[3]=t("span",{class:"input-info error"},"请输入邮箱",-1))]),_:1})])]),t("div",T,[t("a",{href:"javascript:;",class:"btn btn-yellow",onClick:e[1]||(e[1]=(...o)=>i(m)&&i(m)(...o))},"保存设置")])])])}}});export{E as default};
