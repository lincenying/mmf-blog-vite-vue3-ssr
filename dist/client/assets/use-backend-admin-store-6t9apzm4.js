import{h as v,v as c,f as l}from"./main-DGy2Cj_t.js";const A=v("backendAdminStore",()=>{const e=c.reactive({lists:{hasNext:0,hasPrev:0,path:"",page:1,data:[]},item:{data:null,path:""}}),o=async(a,t)=>{if(t||(t=l),e.lists.data.length>0&&a.path===e.lists.path&&a.page===1)return;const{code:s,data:i}=await t.get("backend/admin/list",{...a,path:void 0,cache:!0});if(s===200&&i){const{list:d=[],path:f,hasNext:x=0,hasPrev:u=0,page:n}={...i,path:a.path,page:a.page};e.lists={data:n===1?d:e.lists.data.concat(d),hasNext:x,hasPrev:u,page:(n||1)+1,path:f}}},r=async(a,t)=>{t||(t=l);const{code:s,data:i}=await t.get("backend/admin/item",{...a,path:void 0});s===200&&i&&(e.item={data:i,...a})},m=a=>{e.item.data=a;const t=e.lists.data.findIndex(s=>s._id===a._id);t>-1&&e.lists.data.splice(t,1,a)},p=a=>{const t=e.lists.data.findIndex(s=>s._id===a);t>-1&&e.lists.data.splice(t,1,{...e.lists.data[t],is_delete:1})},h=a=>{const t=e.lists.data.findIndex(s=>s._id===a);t>-1&&e.lists.data.splice(t,1,{...e.lists.data[t],is_delete:0})};return{...c.toRefs(e),getAdminList:o,getAdminItem:r,updateAdminItem:m,deleteAdmin:p,recoverAdmin:h}}),_=A;export{_ as u};
