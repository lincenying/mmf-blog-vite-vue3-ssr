import{h as A,v as l,f as n}from"./main-BCpYjCEU.js";const g=A("backendArticleStore",()=>{const t=l.reactive({lists:{data:[],path:"",hasNext:0,hasPrev:0,page:1},item:{data:null,path:""}}),r=async(a,e=n)=>{if(t.lists.data.length>0&&a.path===t.lists.path&&a.page===1)return;const{code:s,data:i}=await e.get("backend/article/list",{...a,path:void 0});if(s===200&&i){const{list:d=[],path:m,hasNext:u=0,hasPrev:v=0,page:c}={...i,path:a.path,page:a.page};t.lists={data:c===1?d:t.lists.data.concat(d),hasNext:u,hasPrev:v,page:(c||1)+1,path:m}}},o=async(a,e=n)=>{const{code:s,data:i}=await e.get("backend/article/item",{...a,path:void 0});s===200&&i&&(t.item={data:i,...a})},p=async a=>{const e=t.lists.data.findIndex(s=>s._id===a);e>-1&&t.lists.data.splice(e,1,{...t.lists.data[e],is_delete:1})},h=async a=>{const e=t.lists.data.findIndex(s=>s._id===a);e>-1&&t.lists.data.splice(e,1,{...t.lists.data[e],is_delete:0})},x=a=>{t.lists.path&&(t.lists.data=[a].concat(t.lists.data))},f=a=>{const e=t.lists.data.findIndex(s=>s._id===a._id);e>-1&&t.lists.data.splice(e,1,a)};return{...l.toRefs(t),getArticleList:r,getArticleItem:o,deleteArticle:p,recoverArticle:h,insertArticleItem:x,updateArticleItem:f}}),_=g;export{_ as u};
