import{p as u,h as g,t as v}from"./vendor-MhFm0oL3.js";import{c as r}from"./main-DJ1GBfWU.js";const I=u("backendUserStore",()=>{const s=g({lists:{hasNext:0,hasPrev:0,path:"",page:1,data:[]},item:{data:null,path:""}}),c=async(t,e=r)=>{if(s.lists.data.length>0&&t.path===s.lists.path&&t.page===1)return;const{code:a,data:i}=await e.get("backend/user/list",{...t,path:void 0});if(a===200&&i){const{list:d=[],path:m,hasNext:x=0,hasPrev:f=0,page:n}={...i,path:t.path,page:t.page};s.lists={data:n===1?d:s.lists.data.concat(d),hasNext:x,hasPrev:f,page:(n||1)+1,path:m}}},l=async(t,e=r)=>{const{code:a,data:i}=await e.get("backend/user/item",{...t,path:void 0});a===200&&i&&(s.item={data:i,...t})},p=t=>{s.item.data=t;const e=s.lists.data.findIndex(a=>a._id===t._id);e>-1&&s.lists.data.splice(e,1,t)},o=t=>{const e=s.lists.data.findIndex(a=>a._id===t);e>-1&&s.lists.data.splice(e,1,{...s.lists.data[e],is_delete:1})},h=t=>{const e=s.lists.data.findIndex(a=>a._id===t);e>-1&&s.lists.data.splice(e,1,{...s.lists.data[e],is_delete:0})};return{...v(s),getUserList:c,getUserItem:l,updateUserItem:p,deleteUser:o,recoverUser:h}});export{I as u};
