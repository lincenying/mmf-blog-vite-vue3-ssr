import{h as v,v as r,f as c}from"./main-XEZyR5BI.js";const U=v("backendUserStore",()=>{const s=r.reactive({lists:{hasNext:0,hasPrev:0,path:"",page:1,data:[]},item:{data:null,path:""}}),l=async(e,t)=>{if(t||(t=c),s.lists.data.length>0&&e.path===s.lists.path&&e.page===1)return;const{code:a,data:i}=await t.get("backend/user/list",{...e,path:void 0,cache:!0});if(a===200&&i){const{list:d=[],path:f,hasNext:x=0,hasPrev:m=0,page:n}={...i,path:e.path,page:e.page};s.lists={data:n===1?d:s.lists.data.concat(d),hasNext:x,hasPrev:m,page:(n||1)+1,path:f}}},o=async(e,t)=>{t||(t=c);const{code:a,data:i}=await t.get("backend/user/item",{...e,path:void 0});a===200&&i&&(s.item={data:i,...e})},p=e=>{s.item.data=e;const t=s.lists.data.findIndex(a=>a._id===e._id);t>-1&&s.lists.data.splice(t,1,e)},h=e=>{const t=s.lists.data.findIndex(a=>a._id===e);t>-1&&s.lists.data.splice(t,1,{...s.lists.data[t],is_delete:1})},u=e=>{const t=s.lists.data.findIndex(a=>a._id===e);t>-1&&s.lists.data.splice(t,1,{...s.lists.data[t],is_delete:0})};return{...r.toRefs(s),getUserList:l,getUserItem:o,updateUserItem:p,deleteUser:h,recoverUser:u}}),_=U;export{_ as u};
