import{defineComponent as $,toRef as f,onMounted as h,ref as P,resolveComponent as w,mergeProps as y,unref as u,withCtx as L,createTextVNode as j,useSSRContext as M}from"vue";import{ssrRenderAttrs as I,ssrRenderList as B,ssrRenderClass as D,ssrInterpolate as d,ssrRenderComponent as N}from"vue/server-renderer";import{UTC2Date as F}from"@lincy/utils";import{f as H,u as U}from"../entry-server.js";import{u as g}from"./use-backend-admin-store-BwfQ-56h.js";import{useRoute as V}from"vue-router";import{storeToRefs as _}from"pinia";import{useToggle as q}from"@vueuse/core";import{useHead as z}from"@unhead/vue";import"node:path";import"@vue/server-renderer";import"@unhead/ssr";import"js-cookie";import"axios";import"qs";import"element-plus";import"md5";import"lru-cache";const k=$({name:"BackendAdminList",asyncData(i){const{store:t,route:s,api:o}=i;return g(t).getAdminList({page:1,path:s.fullPath},o)},__name:"backend-admin-list",__ssrInlineRender:!0,setup(i){const t=V(),s=H(),o=g(),l=_(o),r=f(l,"lists"),R=_(s),T=f(R,"historyPageScrollTop");U();const[c,m]=q(!1);async function b(n=r.value.page){c.value||(m(!0),await o.getAdminList({page:n,path:t.fullPath}),m(!1))}h(()=>{if(r.value.path==="")b(1);else{const n=T.value[t.path]||0;window.scrollTo(0,n)}});const p=P("管理员列表 - M.M.F 小屋");return z({title:p,meta:[{name:"description",content:p}]}),(n,e,x,A)=>{const C=w("router-link");e(`<div${I(y({class:"card settings-main"},A))}><div class="settings-main-content"><div class="list-section list-header"><div class="list-username">用户名</div><div class="list-email">邮箱</div><div class="list-date">时间</div><div class="list-action">操作</div></div><!--[-->`),B(r.value.data,a=>{e(`<div class="list-section"><div class="${D([a.is_delete?"text-red-500 line-through":"","list-username"])}">${d(a.username)}</div><div class="list-email">${d(a.email)}</div><div class="list-date">${d(u(F)(a.update_date))}</div><div class="list-action">`),e(N(C,{to:`/backend/admin/modify/${a._id}`,class:"badge badge-success"},{default:L((E,v,G,J)=>{if(v)v("编辑");else return[j("编辑")]}),_:2},x)),a.is_delete?e('<a href="javascript:;">恢复</a>'):e('<a href="javascript:;">删除</a>'),e("</div></div>")}),e("<!--]--></div>"),r.value.hasNext?(e('<div class="settings-footer">'),u(c)?e('<a class="admin-load-more" href="javascript:;">加载中...</a>'):e('<a class="admin-load-more" href="javascript:;">加载更多</a>'),e("</div>")):e("<!---->"),e("</div>")}}}),S=k.setup;k.setup=(i,t)=>{const s=M();return(s.modules||(s.modules=new Set)).add("src/pages/backend-admin-list.vue"),S?S(i,t):void 0};export{k as default};
