import{defineComponent as A,toRef as f,onMounted as P,ref as h,resolveComponent as w,mergeProps as y,unref as u,withCtx as L,createTextVNode as j,useSSRContext as M}from"vue";import{ssrRenderAttrs as I,ssrRenderList as D,ssrRenderClass as N,ssrInterpolate as l,ssrRenderComponent as B}from"vue/server-renderer";import{UTC2Date as F}from"@lincy/utils";import{u as g}from"./use-backend-admin-store-BZzjlTL5.js";import{useRoute as H}from"vue-router";import{f as U,u as V}from"../entry-server.js";import{storeToRefs as _}from"pinia";import{useToggle as q}from"@vueuse/core";import{useHead as z}from"@unhead/vue";import"node:path";import"@unhead/vue/server";import"@vue/server-renderer";import"./vendor-Dh2hNSeG.js";import"@vue/shared";import"@popperjs/core";import"lodash-unified";import"dayjs";import"dayjs/plugin/localeData.js";import"dayjs/plugin/customParseFormat.js";import"dayjs/plugin/advancedFormat.js";import"dayjs/plugin/weekOfYear.js";import"dayjs/plugin/weekYear.js";import"dayjs/plugin/dayOfYear.js";import"dayjs/plugin/isSameOrAfter.js";import"dayjs/plugin/isSameOrBefore.js";import"normalize-wheel-es";import"@element-plus/icons-vue";import"@ctrl/tinycolor";import"md5";import"axios";import"qs";import"js-cookie";import"lru-cache";import"node:process";const k=A({name:"BackendAdminList",asyncData(o){const{store:e,route:i,api:r}=o;return g(e).getAdminList({page:1,path:i.fullPath},r)},__name:"backend-admin-list",__ssrInlineRender:!0,setup(o){const e=H(),i=U(),r=g(),d=_(r),a=f(d,"lists"),R=_(i),T=f(R,"historyPageScrollTop");V();const[m,c]=q(!1);async function $(n=a.value.page){m.value||(c(!0),await r.getAdminList({page:n,path:e.fullPath}),c(!1))}P(()=>{if(a.value.path==="")$(1);else{const n=T.value[e.path]||0;window.scrollTo(0,n)}});const p=h("管理员列表 - M.M.F 小屋");return z({title:p,meta:[{name:"description",content:p}]}),(n,t,b,x)=>{const C=w("router-link");t(`<div${I(y({class:"card settings-main"},x))}><div class="settings-main-content"><div class="list-section list-header"><div class="list-username">用户名</div><div class="list-email">邮箱</div><div class="list-date">时间</div><div class="list-action">操作</div></div><!--[-->`),D(a.value.data,s=>{t(`<div class="list-section"><div class="${N([s.is_delete?"text-red-500 line-through":"","list-username"])}">${l(s.username)}</div><div class="list-email">${l(s.email)}</div><div class="list-date">${l(u(F)(s.update_date))}</div><div class="list-action">`),t(B(C,{to:`/backend/admin/modify/${s._id}`,class:"badge badge-success"},{default:L((E,v,G,J)=>{if(v)v("编辑");else return[j("编辑")]}),_:2},b)),s.is_delete?t('<a href="javascript:;">恢复</a>'):t('<a href="javascript:;">删除</a>'),t("</div></div>")}),t("<!--]--></div>"),a.value.hasNext?(t('<div class="settings-footer">'),u(m)?t('<a class="admin-load-more" href="javascript:;">加载中...</a>'):t('<a class="admin-load-more" href="javascript:;">加载更多</a>'),t("</div>")):t("<!---->"),t("</div>")}}}),S=k.setup;k.setup=(o,e)=>{const i=M();return(i.modules||(i.modules=new Set)).add("src/pages/backend-admin-list.vue"),S?S(o,e):void 0};export{k as default};
