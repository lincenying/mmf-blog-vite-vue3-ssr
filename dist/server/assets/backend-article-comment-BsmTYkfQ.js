import{d as w,c as S}from"../entry-server.js";import{defineComponent as $,toRef as j,onMounted as A,ref as _,resolveComponent as x,mergeProps as y,withCtx as L,createTextVNode as M,unref as n,useSSRContext as P}from"vue";import{ssrRenderAttrs as T,ssrRenderComponent as h,ssrRenderList as D,ssrRenderAttr as I,ssrInterpolate as c}from"vue/server-renderer";import{getDateDiff as N}from"@lincy/utils";import{u as v}from"./use-global-comment-store-BhNjELEy.js";import{useRoute as B}from"vue-router";import{storeToRefs as F}from"pinia";import{useToggle as H}from"@vueuse/core";import{useHead as V}from"@unhead/vue";import"node:path";import"@unhead/vue/server";import"@vue/server-renderer";import"./vendor-Dh2hNSeG.js";import"@vue/shared";import"@popperjs/core";import"lodash-unified";import"dayjs";import"dayjs/plugin/localeData.js";import"dayjs/plugin/customParseFormat.js";import"dayjs/plugin/advancedFormat.js";import"dayjs/plugin/weekOfYear.js";import"dayjs/plugin/weekYear.js";import"dayjs/plugin/dayOfYear.js";import"dayjs/plugin/isSameOrAfter.js";import"dayjs/plugin/isSameOrBefore.js";import"normalize-wheel-es";import"@element-plus/icons-vue";import"@ctrl/tinycolor";import"md5";import"axios";import"qs";import"js-cookie";import"lru-cache";import"node:process";const g=$({name:"BackendArticleComment",asyncData(m){const{store:o,route:e,api:i}=m;return v(o).getCommentList({page:1,path:e.fullPath,all:1,id:e.params.id},i)},__name:"backend-article-comment",__ssrInlineRender:!0,setup(m){const o=B(),e=v(),i=F(e),r=j(i,"lists"),[l,p]=H(!1);async function C(s=r.value.page){l.value||(p(!0),await e.getCommentList({page:s,path:o.fullPath,all:1,id:o.params.id},S),p(!1))}A(()=>{r.value.path===""&&C(1)});const d=_("评论列表 - M.M.F 小屋");return V({title:d,meta:[{name:"description",content:d}]}),(s,t,b,R)=>{const k=x("router-link");t(`<div${T(y({class:"card"},R))}><div class="comments"><div class="comment-back">`),t(h(k,{to:"/backend/article/list",class:"btn btn-blue"},{default:L((a,f,q,z)=>{if(f)f("返回");else return[M("返回")]}),_:1},b)),t('</div><div class="comment-items-wrap"><!--[-->'),D(r.value.data,a=>{t(`<div class="comment-item"><a href="javascript:;" class="comment-author-avatar-link"><img${I("src",("useAvatar"in s?s.useAvatar:n(w))(a.email))} alt="" class="avatar-img"></a><div class="comment-content-wrap"><span class="comment-author-wrap"><a href="javascript:;" class="comment-author">${c(a.username)}</a></span><div class="comment-content">${c(a.content)}</div><div class="comment-footer"><span class="comment-time">${c(n(N)(`${a.timestamp}`))}</span>`),a.is_delete?t('<a href="javascript:;" class="comment-action-item comment-reply">恢复</a>'):t('<a href="javascript:;" class="comment-action-item comment-reply">删除</a>'),t("</div></div></div>")}),t("<!--]--></div>"),r.value.hasNext?(t('<div class="load-more-wrap">'),n(l)?t('<a href="javascript:;" class="comments-load-more">加载中...</a>'):t('<a href="javascript:;" class="comments-load-more">加载更多</a>'),t("</div>")):t("<!---->"),t("</div></div>")}}}),u=g.setup;g.setup=(m,o)=>{const e=P();return(e.modules||(e.modules=new Set)).add("src/pages/backend-article-comment.vue"),u?u(m,o):void 0};export{g as default};
