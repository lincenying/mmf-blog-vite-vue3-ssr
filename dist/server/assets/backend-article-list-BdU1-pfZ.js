import{defineComponent as M,toRef as b,ref as S,onMounted as D,resolveComponent as N,mergeProps as B,unref as c,withCtx as x,createTextVNode as $,useSSRContext as F}from"vue";import{ssrRenderAttrs as H,ssrRenderAttr as K,ssrRenderList as V,ssrRenderClass as q,ssrInterpolate as d,ssrRenderComponent as y}from"vue/server-renderer";import{getDateDiff as z}from"@lincy/utils";import{u as R}from"./use-backend-article-store-D5khvARS.js";import{useRoute as E}from"vue-router";import{f as G,u as J}from"../entry-server.js";import{storeToRefs as k}from"pinia";import{useToggle as O}from"@vueuse/core";import{useHead as Q}from"@unhead/vue";import"node:path";import"@unhead/vue/server";import"@vue/server-renderer";import"./vendor-Dh2hNSeG.js";import"@vue/shared";import"@popperjs/core";import"lodash-unified";import"dayjs";import"dayjs/plugin/localeData.js";import"dayjs/plugin/customParseFormat.js";import"dayjs/plugin/advancedFormat.js";import"dayjs/plugin/weekOfYear.js";import"dayjs/plugin/weekYear.js";import"dayjs/plugin/dayOfYear.js";import"dayjs/plugin/isSameOrAfter.js";import"dayjs/plugin/isSameOrBefore.js";import"normalize-wheel-es";import"@element-plus/icons-vue";import"@ctrl/tinycolor";import"md5";import"axios";import"qs";import"js-cookie";import"lru-cache";import"node:process";const T=M({name:"BackendArticleList",asyncData(r){const{store:s,route:i,api:a}=r;return R(s).getArticleList({page:1,path:i.fullPath},a)},__name:"backend-article-list",__ssrInlineRender:!0,setup(r){const s=E(),i=G(),a=R(),m=k(a),l=b(m,"lists"),h=k(i),C=b(h,"historyPageScrollTop");J();const[p,f]=O(!1),v=S("");async function P(n=l.value.page,e=v.value){p.value||(console.log(e),f(!0),await a.getArticleList({page:n,key:e,path:s.fullPath}),f(!1))}D(()=>{if(l.value.path==="")P(1);else{const n=C.value[s.path]||0;window.scrollTo(0,n)}});const u=S("文章列表 - M.M.F 小屋");return Q({title:u,meta:[{name:"description",content:u}]}),(n,e,g,w)=>{const _=N("router-link");e(`<div${H(B({class:"settings-main card"},w))}><div class="settings-main-content" flex="~ justify-end" border-b="1px solid hex-f4f4f4"><input${K("value",c(v))} placeholder="请输入标题, 记得按回车哦" name="search" class="base-input my-10px w-500px"></div><div class="settings-main-content"><div class="list-section list-header"><div class="list-title">标题</div><div class="list-category">分类</div><div class="list-date">最后更新</div><div class="list-action">操作</div></div><!--[-->`),V(l.value.data,t=>{e(`<div class="list-section"><div class="${q([t.is_delete?"text-red-500 line-through":"","list-title"])}">${d(t.title)}</div><div class="list-category">${d(t.category_name)}</div><div class="list-date">${d(c(z)(t.update_date))}</div><div class="list-action">`),e(y(_,{to:`/backend/article/modify/${t._id}`,class:"badge badge-success"},{default:x((j,o,L,I)=>{if(o)o("编辑");else return[$("编辑")]}),_:2},g)),t.is_delete?e('<a href="javascript:;">恢复</a>'):e('<a href="javascript:;">删除</a>'),t.comment_count>0?e(y(_,{to:`/backend/article/comment/${t._id}`,class:"badge badge-success"},{default:x((j,o,L,I)=>{if(o)o(" 评论 ");else return[$(" 评论 ")]}),_:2},g)):e("<!---->"),e("</div></div>")}),e("<!--]--></div>"),l.value.hasNext?(e('<div class="settings-footer">'),c(p)?e('<a class="admin-load-more" href="javascript:;">加载中...</a>'):e('<a class="admin-load-more" href="javascript:;">加载更多</a>'),e("</div>")):e("<!---->"),e("</div>")}}}),A=T.setup;T.setup=(r,s)=>{const i=F();return(i.modules||(i.modules=new Set)).add("src/pages/backend-article-list.vue"),A?A(r,s):void 0};export{T as default};
