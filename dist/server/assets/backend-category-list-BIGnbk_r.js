import{defineComponent as x,toRef as p,onMounted as P,ref as h,resolveComponent as k,mergeProps as w,withCtx as L,createTextVNode as M,useSSRContext as I}from"vue";import{ssrRenderAttrs as j,ssrRenderList as A,ssrRenderClass as B,ssrInterpolate as g,ssrRenderComponent as D}from"vue/server-renderer";import{u}from"./use-global-category-store-BpFdaCEC.js";import{useRoute as F}from"vue-router";import{f as H,u as N,c as V}from"../entry-server.js";import{storeToRefs as f}from"pinia";import{useToggle as q}from"@vueuse/core";import{useHead as z}from"@unhead/vue";import"node:path";import"@unhead/ssr";import"@vue/server-renderer";import"element-plus";import"@lincy/utils";import"md5";import"axios";import"qs";import"js-cookie";import"lru-cache";import"node:process";const _=x({name:"BackendCategoryList",asyncData(r){const{store:e,route:o,api:i}=r;return u(e).getCategoryList({limit:99,path:o.fullPath},i)},__name:"backend-category-list",__ssrInlineRender:!0,setup(r){const e=F(),o=H(),i=u(),l=f(i),n=p(l,"lists"),y=f(o),S=p(y,"historyPageScrollTop");N();const[C,c]=q(!1);async function R(a){C.value||(c(!0),await i.getCategoryList({page:a,limit:99,path:e.fullPath},V),c(!1))}P(()=>{if(n.value.length===0)R(1);else{const a=S.value[e.path]||0;window.scrollTo(0,a)}});const d=h("分类列表 - M.M.F 小屋");return z({title:d,meta:[{name:"description",content:d}]}),(a,t,b,T)=>{const $=k("router-link");t(`<div${j(w({class:"card settings-main"},T))}><div class="settings-main-content"><div class="list-section list-header"><div class="list-title">分类名称</div><div class="list-date">分类排序</div><div class="list-action">操作</div></div><!--[-->`),A(n.value,s=>{t(`<div class="list-section"><div class="${B([s.is_delete?"text-red-500 line-through":"","list-title"])}">${g(s.cate_name)}</div><div class="list-time">${g(s.cate_order)}</div><div class="list-action">`),t(D($,{to:`/backend/category/modify/${s._id}`,class:"badge badge-success"},{default:L((E,m,G,J)=>{if(m)m("编辑");else return[M("编辑")]}),_:2},b)),s.cate_num?t("<!---->"):(t("<!--[-->"),s.is_delete?t('<a href="javascript:;">恢复</a>'):t('<a href="javascript:;">删除</a>'),t("<!--]-->")),t("</div></div>")}),t("<!--]--></div></div>")}}}),v=_.setup;_.setup=(r,e)=>{const o=I();return(o.modules||(o.modules=new Set)).add("src/pages/backend-category-list.vue"),v?v(r,e):void 0};export{_ as default};
