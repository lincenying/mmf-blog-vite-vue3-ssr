import{defineComponent as $,toRef as p,onMounted as k,ref as h,resolveComponent as w,mergeProps as L,withCtx as P,createTextVNode as M,useSSRContext as I}from"vue";import{ssrRenderAttrs as j,ssrRenderList as A,ssrRenderClass as B,ssrInterpolate as g,ssrRenderComponent as D}from"vue/server-renderer";import{f as F,u as G,c as H}from"../entry-server.js";import{u}from"./use-global-category-store-U2BygGah.js";import{useRoute as N}from"vue-router";import{storeToRefs as v}from"pinia";import{useToggle as V}from"@vueuse/core";import{useHead as q}from"@unhead/vue";import"node:path";import"@vue/server-renderer";import"@unhead/ssr";import"js-cookie";import"@lincy/utils";import"axios";import"qs";import"element-plus";import"md5";import"lru-cache";const _=$({name:"BackendCategoryList",asyncData(r){const{store:e,route:o,api:i}=r;return u(e).getCategoryList({limit:99,path:o.fullPath},i)},__name:"backend-category-list",__ssrInlineRender:!0,setup(r){const e=N(),o=F(),i=u(),l=v(i),n=p(l,"lists"),y=v(o),C=p(y,"historyPageScrollTop");G();const[S,c]=V(!1);async function b(a){S.value||(c(!0),await i.getCategoryList({page:a,limit:99,path:e.path},H),c(!1))}k(()=>{if(n.value.length===0)b(1);else{const a=C.value[e.path]||0;window.scrollTo(0,a)}});const d=h("分类列表 - M.M.F 小屋");return q({title:d,meta:[{name:"description",content:d}]}),(a,t,R,T)=>{const x=w("router-link");t(`<div${j(L({class:"card settings-main"},T))}><div class="settings-main-content"><div class="list-section"><div class="list-title">分类名称</div><div class="list-time">分类排序</div><div class="list-action">操作</div></div><!--[-->`),A(n.value,s=>{t(`<div class="list-section"><div class="${B([s.is_delete?"text-red-500 line-through":"","list-title"])}">${g(s.cate_name)}</div><div class="list-time">${g(s.cate_order)}</div><div class="list-action">`),t(D(x,{to:`/backend/category/modify/${s._id}`,class:"badge badge-success"},{default:P((z,m,E,J)=>{if(m)m("编辑");else return[M("编辑")]}),_:2},R)),s.cate_num?t("<!---->"):(t("<!--[-->"),s.is_delete?t('<a href="javascript:;">恢复</a>'):t('<a href="javascript:;">删除</a>'),t("<!--]-->")),t("</div></div>")}),t("<!--]--></div></div>")}}}),f=_.setup;_.setup=(r,e)=>{const o=I();return(o.modules||(o.modules=new Set)).add("src/pages/backend-category-list.vue"),f?f(r,e):void 0};export{_ as default};
