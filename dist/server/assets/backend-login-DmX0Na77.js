import{e as R,b as C,s as M,c as V,_ as U}from"../entry-server.js";import{_ as S}from"./a-input-Dz__SNyu.js";import{defineComponent as A,reactive as F,onMounted as L,ref as T,mergeProps as j,withCtx as _,unref as s,withDirectives as w,createVNode as i,vModelText as b,useSSRContext as B}from"vue";import{ssrRenderAttrs as D,ssrRenderComponent as m,ssrRenderAttr as v}from"vue/server-renderer";import G from"js-cookie";import{useRouter as H}from"vue-router";import{useHead as N}from"@unhead/vue";import"node:path";import"@vue/server-renderer";import"@unhead/ssr";import"pinia";import"@lincy/utils";import"@vueuse/core";import"axios";import"qs";import"element-plus";import"md5";import"lru-cache";const $=A({name:"BackendLogin",__name:"backend-login",__ssrInlineRender:!0,setup(d){const{ctx:p}=R(),n=H(),e=F({username:"",password:""});C(async()=>{if(!e.username||!e.password)return M("请输入用户名和密码!");const u=p.$loading.show(),{code:t,data:o}=await V.post("backend/admin/login",e);u.hide(),t===200&&o&&n.push("/backend/article/list")}),L(()=>{G.get("b_user")&&n.push("/backend/article/list")});const c=T("管理员登录 - M.M.F 小屋");return N({title:c,meta:[{name:"description",content:c}]}),(u,t,o,x)=>{const f=S,k=U;t(`<div${D(j({class:"settings-main card"},x))}><div class="settings-main-content"><form>`),t(m(f,{title:"账号"},{default:_((y,a,h,r)=>{if(a)a(`<input${v("value",s(e).username)} type="text" placeholder="请输入管理员账号" class="base-input" name="username"${r}><span class="input-info error"${r}>请输入昵称</span>`);else return[w(i("input",{"onUpdate:modelValue":l=>s(e).username=l,type:"text",placeholder:"请输入管理员账号",class:"base-input",name:"username"},null,8,["onUpdate:modelValue"]),[[b,s(e).username]]),i("span",{class:"input-info error"},"请输入昵称")]}),_:1},o)),t(m(f,{title:"密码"},{default:_((y,a,h,r)=>{if(a)a(`<input${v("value",s(e).password)} type="password" placeholder="请输入管理员密码" class="base-input" name="password"${r}><span class="input-info error"${r}>请输入密码</span>`);else return[w(i("input",{"onUpdate:modelValue":l=>s(e).password=l,type:"password",placeholder:"请输入管理员密码",class:"base-input",name:"password"},null,8,["onUpdate:modelValue"]),[[b,s(e).password]]),i("span",{class:"input-info error"},"请输入密码")]}),_:1},o)),t('</form></div><div class="settings-footer"><a href="javascript:;" class="btn btn-yellow">登录</a></div>'),t(m(k,null,null,o)),t("</div>")}}}),g=$.setup;$.setup=(d,p)=>{const n=B();return(n.modules||(n.modules=new Set)).add("src/pages/backend-login.vue"),g?g(d,p):void 0};export{$ as default};
