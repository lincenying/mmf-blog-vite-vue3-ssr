import{_ as k}from"./a-input-Dz__SNyu.js";import{defineComponent as U,toRefs as A,toRef as F,ref as p,onMounted as V,mergeProps as P,withCtx as w,unref as u,createVNode as c,withDirectives as T,isRef as j,vModelText as D,useSSRContext as H}from"vue";import{ssrRenderAttrs as L,ssrRenderComponent as x,ssrRenderAttr as y}from"vue/server-renderer";import{a as N,b as q,s as m,c as $}from"../entry-server.js";import{useHead as z}from"@unhead/vue";import"node:path";import"@vue/server-renderer";import"@unhead/ssr";import"pinia";import"js-cookie";import"vue-router";import"@lincy/utils";import"@vueuse/core";import"axios";import"qs";import"element-plus";import"md5";import"lru-cache";import"node:process";const R=U({name:"FrontendUserAccount",__name:"frontend-user-account",__ssrInlineRender:!0,setup(d){const a=N(),r=A(a),f=F(r,"cookies");let o=p(""),e=p("");async function C(){const{code:i,data:t}=await $.get("frontend/user/account",{});i===200&&(o.value=t.username,e.value=t.email)}V(()=>{C()}),q(async()=>{const i=/^[\w\-.]+@[\w-]+\.[\w-]+$/;if(e.value){if(!i.test(e.value)){m("邮箱格式错误!");return}}else{m("请填写邮箱地址!");return}const{code:t,message:l}=await $.post("frontend/user/account",{email:e.value,username:o.value,id:f.value.userid});t===200&&(a.setCookies({...f.value,useremail:e.value}),m({type:"success",content:l}))});const v=p("帐号 - M.M.F 小屋");return z({title:v,meta:[{name:"description",content:v}]}),(i,t,l,h)=>{const _=k;t(`<div${L(P({class:"cards-wrap home-feeds"},h))}><div class="card settings-main"><div class="settings-main-content"><form>`),t(x(_,{title:"昵称"},{default:w((M,s,S,n)=>{if(s)s(`<input type="text"${y("value",u(o))} placeholder="昵称" class="base-input" name="username" readonly${n}><span class="input-info error"${n}>请输入昵称</span>`);else return[c("input",{type:"text",value:u(o),placeholder:"昵称",class:"base-input",name:"username",readonly:""},null,8,["value"]),c("span",{class:"input-info error"},"请输入昵称")]}),_:1},l)),t(x(_,{title:"邮箱"},{default:w((M,s,S,n)=>{if(s)s(`<input${y("value",u(e))} type="text" placeholder="邮箱" class="base-input" name="email"${n}><span class="input-info error"${n}>请输入邮箱</span>`);else return[T(c("input",{"onUpdate:modelValue":g=>j(e)?e.value=g:e=g,type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,8,["onUpdate:modelValue"]),[[D,u(e)]]),c("span",{class:"input-info error"},"请输入邮箱")]}),_:1},l)),t('</form></div><div class="settings-footer"><a href="javascript:;" class="btn btn-yellow">保存设置</a></div></div></div>')}}}),b=R.setup;R.setup=(d,a)=>{const r=H();return(r.modules||(r.modules=new Set)).add("src/pages/frontend-user-account.vue"),b?b(d,a):void 0};export{R as default};
