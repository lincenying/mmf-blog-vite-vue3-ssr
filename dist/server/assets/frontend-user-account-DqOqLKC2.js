import{_ as k}from"./a-input-BeZLXpwF.js";import{defineComponent as U,toRefs as A,toRef as F,ref as u,onMounted as V,mergeProps as P,withCtx as w,unref as m,createVNode as l,withDirectives as T,isRef as j,vModelText as D,useSSRContext as H}from"vue";import{ssrRenderAttrs as L,ssrRenderComponent as x,ssrRenderAttr as y}from"vue/server-renderer";import{a as N,b as q,s as c,c as $}from"../entry-server.js";import{useHead as z}from"@unhead/vue";import"node:path";import"@unhead/vue/server";import"@vue/server-renderer";import"pinia";import"./vendor-Dh2hNSeG.js";import"@vueuse/core";import"@vue/shared";import"@popperjs/core";import"lodash-unified";import"dayjs";import"dayjs/plugin/localeData.js";import"dayjs/plugin/customParseFormat.js";import"dayjs/plugin/advancedFormat.js";import"dayjs/plugin/weekOfYear.js";import"dayjs/plugin/weekYear.js";import"dayjs/plugin/dayOfYear.js";import"dayjs/plugin/isSameOrAfter.js";import"dayjs/plugin/isSameOrBefore.js";import"normalize-wheel-es";import"@element-plus/icons-vue";import"@ctrl/tinycolor";import"@lincy/utils";import"md5";import"vue-router";import"axios";import"qs";import"js-cookie";import"lru-cache";import"node:process";const R=U({name:"FrontendUserAccount",__name:"frontend-user-account",__ssrInlineRender:!0,setup(d){const s=N(),n=A(s),f=F(n,"cookies");let a=u(""),e=u("");async function C(){const{code:i,data:t}=await $.get("frontend/user/account",{});i===200&&(a.value=t.username,e.value=t.email)}V(()=>{C()}),q(async()=>{const i=/^[\w\-.]+@[\w-]+\.[\w-]+$/;if(e.value){if(!i.test(e.value)){c("邮箱格式错误!");return}}else{c("请填写邮箱地址!");return}const{code:t,message:p}=await $.post("frontend/user/account",{email:e.value,username:a.value,id:f.value.userid});t===200&&(s.setCookies({...f.value,useremail:e.value}),c({type:"success",content:p}))});const v=u("帐号 - M.M.F 小屋");return z({title:v,meta:[{name:"description",content:v}]}),(i,t,p,h)=>{const _=k;t(`<div${L(P({class:"cards-wrap home-feeds"},h))}><div class="card settings-main"><div class="settings-main-content"><form>`),t(x(_,{title:"昵称"},{default:w((M,r,S,o)=>{if(r)r(`<input type="text"${y("value",m(a))} placeholder="昵称" class="base-input" name="username" readonly${o}><span class="input-info error"${o}>请输入昵称</span>`);else return[l("input",{type:"text",value:m(a),placeholder:"昵称",class:"base-input",name:"username",readonly:""},null,8,["value"]),l("span",{class:"input-info error"},"请输入昵称")]}),_:1},p)),t(x(_,{title:"邮箱"},{default:w((M,r,S,o)=>{if(r)r(`<input${y("value",m(e))} type="text" placeholder="邮箱" class="base-input" name="email"${o}><span class="input-info error"${o}>请输入邮箱</span>`);else return[T(l("input",{"onUpdate:modelValue":g=>j(e)?e.value=g:e=g,type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,8,["onUpdate:modelValue"]),[[D,m(e)]]),l("span",{class:"input-info error"},"请输入邮箱")]}),_:1},p)),t('</form></div><div class="settings-footer"><a href="javascript:;" class="btn btn-yellow">保存设置</a></div></div></div>')}}}),b=R.setup;R.setup=(d,s)=>{const n=H();return(n.modules||(n.modules=new Set)).add("src/pages/frontend-user-account.vue"),b?b(d,s):void 0};export{R as default};
