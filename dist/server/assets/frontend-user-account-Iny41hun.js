import{_ as S}from"./a-input-wxmridTV.js";import{defineComponent as k,toRefs as U,toRef as z,ref as p,onMounted as F,mergeProps as V,withCtx as x,unref as u,createVNode as c,withDirectives as Z,isRef as P,vModelText as T,useSSRContext as j}from"vue";import{ssrRenderAttrs as D,ssrRenderComponent as y,ssrRenderAttr as $}from"vue/server-renderer";import{a as H,b as L,s as m,c as b}from"../entry-server.js";import{useHead as N}from"@unhead/vue";import"node:path";import"@vue/server-renderer";import"@unhead/ssr";import"pinia";import"js-cookie";import"vue-router";import"@lincy/utils";import"@vueuse/core";import"axios";import"qs";import"element-plus";import"md5";import"lru-cache";const R=k({name:"FrontendUserAccount",__name:"frontend-user-account",__ssrInlineRender:!0,setup(d){const n=H(),r=U(n),f=z(r,"cookies");let o=p(""),e=p("");async function A(){const{code:i,data:t}=await b.get("frontend/user/account",{});i===200&&(o.value=t.username,e.value=t.email)}F(()=>{A()}),L(async()=>{const i=/^([a-zA-Z0-9_\-.]+)@([a-zA-Z0-9_-]+)(\.[a-zA-Z0-9_-]+)$/i;if(e.value){if(!i.test(e.value)){m("邮箱格式错误!");return}}else{m("请填写邮箱地址!");return}const{code:t,message:l}=await b.post("frontend/user/account",{email:e.value,username:o.value,id:f.value.userid});t===200&&(n.setCookies({...f.value,useremail:e.value}),m({type:"success",content:l}))});const v=p("帐号 - M.M.F 小屋");return N({title:v,meta:[{name:"description",content:v}]}),(i,t,l,C)=>{const _=S;t(`<div${D(V({class:"cards-wrap home-feeds"},C))}><div class="card settings-main"><div class="settings-main-content"><form>`),t(y(_,{title:"昵称"},{default:x((h,s,M,a)=>{if(s)s(`<input type="text"${$("value",u(o))} placeholder="昵称" class="base-input" name="username" readonly${a}><span class="input-info error"${a}>请输入昵称</span>`);else return[c("input",{type:"text",value:u(o),placeholder:"昵称",class:"base-input",name:"username",readonly:""},null,8,["value"]),c("span",{class:"input-info error"},"请输入昵称")]}),_:1},l)),t(y(_,{title:"邮箱"},{default:x((h,s,M,a)=>{if(s)s(`<input${$("value",u(e))} type="text" placeholder="邮箱" class="base-input" name="email"${a}><span class="input-info error"${a}>请输入邮箱</span>`);else return[Z(c("input",{"onUpdate:modelValue":g=>P(e)?e.value=g:e=g,type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,8,["onUpdate:modelValue"]),[[T,u(e)]]),c("span",{class:"input-info error"},"请输入邮箱")]}),_:1},l)),t('</form></div><div class="settings-footer"><a href="javascript:;" class="btn btn-yellow">保存设置</a></div></div></div>')}}}),w=R.setup;R.setup=(d,n)=>{const r=j();return(r.modules||(r.modules=new Set)).add("src/pages/frontend-user-account.vue"),w?w(d,n):void 0};export{R as default};
