import{_ as S}from"./a-input-a46fa5e4.js";import{defineComponent as k,toRefs as U,toRef as z,ref as g,onMounted as F,computed as V,mergeProps as Z,withCtx as x,unref as u,createVNode as c,withDirectives as P,isRef as T,vModelText as j,useSSRContext as D}from"vue";import{ssrRenderAttrs as H,ssrRenderComponent as y,ssrRenderAttr as $}from"vue/server-renderer";import{a as L,b as N,s as p,c as b}from"../entry-server.js";import{useHead as q}from"@vueuse/head";import"node:path";import"@vue/server-renderer";import"pinia";import"js-cookie";import"vue-router";import"@lincy/utils";import"@vueuse/core";import"axios";import"qs";import"element-plus";import"md5";import"lru-cache";const R=k({name:"FrontendUserAccount",__name:"frontend-user-account",__ssrInlineRender:!0,setup(m){const a=L(),r=U(a),d=z(r,"cookies");let o=g(""),e=g("");async function A(){const{code:i,data:t}=await b.get("frontend/user/account",{});i===200&&(o.value=t.username,e.value=t.email)}F(()=>{A()}),N(async()=>{const i=/^([a-zA-Z0-9_\-.]+)@([a-zA-Z0-9_-]+)(\.[a-zA-Z0-9_-]+)$/i;if(e.value){if(!i.test(e.value)){p("邮箱格式错误!");return}}else{p("请填写邮箱地址!");return}const{code:t,message:l}=await b.post("frontend/user/account",{email:e.value,username:o.value,id:d.value.userid});t===200&&(a.setCookies({...d.value,useremail:e.value}),p({type:"success",content:l}))});const f=V(()=>"帐号 - M.M.F 小屋");return q({title:f,meta:[{name:"description",content:f}]}),(i,t,l,C)=>{const v=S;t(`<div${H(Z({class:"cards-wrap home-feeds"},C))}><div class="card settings-main"><div class="settings-main-content"><form>`),t(y(v,{title:"昵称"},{default:x((h,s,M,n)=>{if(s)s(`<input type="text"${$("value",u(o))} placeholder="昵称" class="base-input" name="username" readonly${n}><span class="input-info error"${n}>请输入昵称</span>`);else return[c("input",{type:"text",value:u(o),placeholder:"昵称",class:"base-input",name:"username",readonly:""},null,8,["value"]),c("span",{class:"input-info error"},"请输入昵称")]}),_:1},l)),t(y(v,{title:"邮箱"},{default:x((h,s,M,n)=>{if(s)s(`<input${$("value",u(e))} type="text" placeholder="邮箱" class="base-input" name="email"${n}><span class="input-info error"${n}>请输入邮箱</span>`);else return[P(c("input",{"onUpdate:modelValue":_=>T(e)?e.value=_:e=_,type:"text",placeholder:"邮箱",class:"base-input",name:"email"},null,8,["onUpdate:modelValue"]),[[j,u(e)]]),c("span",{class:"input-info error"},"请输入邮箱")]}),_:1},l)),t('</form></div><div class="settings-footer"><a href="javascript:;" class="btn btn-yellow">保存设置</a></div></div></div>')}}}),w=R.setup;R.setup=(m,a)=>{const r=D();return(r.modules||(r.modules=new Set)).add("src/pages/frontend-user-account.vue"),w?w(m,a):void 0};export{R as default};
