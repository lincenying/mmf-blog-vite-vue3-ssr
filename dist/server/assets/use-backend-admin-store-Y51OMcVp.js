import{defineStore as u}from"pinia";import{c}from"../entry-server.js";import{reactive as A,toRefs as g}from"vue";const v=u("backendAdminStore",()=>{const a=A({lists:{hasNext:0,hasPrev:0,path:"",page:1,data:[]},item:{data:null,path:""}}),o=async(e,t)=>{if(t||(t=c),a.lists.data.length>0&&e.path===a.lists.path&&e.page===1)return;const{code:s,data:i}=await t.get("backend/admin/list",{...e,path:void 0,cache:!0});if(s===200&&i){const{list:d=[],path:h,hasNext:f=0,hasPrev:x=0,page:n}={...i,path:e.path,page:e.page};a.lists={data:n===1?d:a.lists.data.concat(d),hasNext:f,hasPrev:x,page:(n||1)+1,path:h}}},l=async(e,t)=>{t||(t=c);const{code:s,data:i}=await t.get("backend/admin/item",{...e,path:void 0});s===200&&i&&(a.item={data:i,...e})},m=e=>{a.item.data=e;const t=a.lists.data.findIndex(s=>s._id===e._id);t>-1&&a.lists.data.splice(t,1,e)},r=e=>{const t=a.lists.data.findIndex(s=>s._id===e);t>-1&&a.lists.data.splice(t,1,{...a.lists.data[t],is_delete:1})},p=e=>{const t=a.lists.data.findIndex(s=>s._id===e);t>-1&&a.lists.data.splice(t,1,{...a.lists.data[t],is_delete:0})};return{...g(a),getAdminList:o,getAdminItem:l,updateAdminItem:m,deleteAdmin:r,recoverAdmin:p}}),S=v;export{S as u};
