import{defineStore as A}from"pinia";import{c as l}from"../entry-server.js";import{reactive as g,toRefs as v}from"vue";const I=A("backendArticleStore",()=>{const e=g({lists:{data:[],path:"",hasNext:0,hasPrev:0,page:1},item:{data:null,path:""}}),n=async(a,t)=>{if(t||(t=l),e.lists.data.length>0&&a.path===e.lists.path&&a.page===1)return;const{code:s,data:i}=await t.get("backend/article/list",{...a,path:void 0,cache:!0});if(s===200&&i){const{list:c=[],path:m,hasNext:x=0,hasPrev:u=0,page:d}={...i,path:a.path,page:a.page};e.lists={data:d===1?c:e.lists.data.concat(c),hasNext:x,hasPrev:u,page:(d||1)+1,path:m}}},r=async(a,t)=>{t||(t=l);const{code:s,data:i}=await t.get("backend/article/item",{...a,path:void 0});s===200&&i&&(e.item={data:i,...a})},o=async a=>{const t=e.lists.data.findIndex(s=>s._id===a);t>-1&&e.lists.data.splice(t,1,{...e.lists.data[t],is_delete:1})},p=async a=>{const t=e.lists.data.findIndex(s=>s._id===a);t>-1&&e.lists.data.splice(t,1,{...e.lists.data[t],is_delete:0})},h=a=>{e.lists.path&&(e.lists.data=[a].concat(e.lists.data))},f=a=>{const t=e.lists.data.findIndex(s=>s._id===a._id);t>-1&&e.lists.data.splice(t,1,a)};return{...v(e),getArticleList:n,getArticleItem:r,deleteArticle:o,recoverArticle:p,insertArticleItem:h,updateArticleItem:f}}),b=I;export{b as u};
