import{defineStore as g}from"pinia";import{c as n}from"../entry-server.js";import{reactive as m,toRefs as y}from"vue";const u=g("globalCategoryStore",()=>{const e=m({lists:[],item:{data:null}}),a=async(s,t)=>{if(t||(t=n),e.lists.length)return;const{code:i,data:o}=await t.get("backend/category/list",{...s,path:void 0,cache:!0});i===200&&o&&(e.lists=o.list)},c=async(s,t)=>{t||(t=n);const{code:i,data:o}=await t.get("backend/category/item",{...s,path:void 0});i===200&&o&&(e.item={data:o,...s})},r=s=>{e.lists=[s].concat(e.lists)},d=s=>{e.item.data=s;const t=e.lists.findIndex(i=>i._id===s._id);t>-1&&e.lists.splice(t,1,s)},l=s=>{const t=e.lists.findIndex(i=>i._id===s);t>-1&&e.lists.splice(t,1,{...e.lists[t],is_delete:1})},f=s=>{const t=e.lists.findIndex(i=>i._id===s);t>-1&&e.lists.splice(t,1,{...e.lists[t],is_delete:0})};return{...y(e),getCategoryList:a,getCategoryItem:c,insertCategoryItem:r,updateCategoryItem:d,deleteCategory:l,recoverCategory:f}}),_=u;export{_ as u};
