import{defineStore as f}from"pinia";import{c as a}from"../entry-server.js";import{reactive as m,toRefs as y}from"vue";const p=f("globalCategoryStore",()=>{const t=m({lists:[],item:{data:null}}),n=async(e,s=a)=>{if(t.lists.length)return;const{code:i,data:o}=await s.get("backend/category/list",{...e,path:void 0,cache:!0});i===200&&o&&(t.lists=o.list)},c=async(e,s=a)=>{const{code:i,data:o}=await s.get("backend/category/item",{...e,path:void 0});i===200&&o&&(t.item={data:o,...e})},r=e=>{t.lists=[e].concat(t.lists)},d=e=>{t.item.data=e;const s=t.lists.findIndex(i=>i._id===e._id);s>-1&&t.lists.splice(s,1,e)},l=e=>{const s=t.lists.findIndex(i=>i._id===e);s>-1&&t.lists.splice(s,1,{...t.lists[s],is_delete:1})},g=e=>{const s=t.lists.findIndex(i=>i._id===e);s>-1&&t.lists.splice(s,1,{...t.lists[s],is_delete:0})};return{...y(t),getCategoryList:n,getCategoryItem:c,insertCategoryItem:r,updateCategoryItem:d,deleteCategory:l,recoverCategory:g}}),I=p;export{I as u};
