import{defineStore as f}from"pinia";import{c as x}from"../entry-server.js";import{reactive as u,toRefs as C}from"vue";const v=f("globalCommentStore",()=>{const t=u({lists:{data:[],hasNext:0,hasPrev:0,page:1,path:""}}),d=async(e,s=x)=>{if(e.path===t.lists.path&&e.page===1)return;const{code:a,data:i}=await s.get("frontend/comment/list",{...e,path:void 0,cache:!0});if(a===200&&i){const{list:o=[],path:m="",hasNext:p=0,hasPrev:h=0,page:n=1}={...e,...i};t.lists={data:n===1?o:t.lists.data.concat(o),hasNext:p,hasPrev:h,page:n,path:m}}},l=e=>{t.lists.data=[e].concat(t.lists.data)},r=e=>{const s=t.lists.data.findIndex(a=>a._id===e);s>-1&&t.lists.data.splice(s,1,{...t.lists.data[s],is_delete:1})},c=e=>{const s=t.lists.data.findIndex(a=>a._id===e);s>-1&&t.lists.data.splice(s,1,{...t.lists.data[s],is_delete:0})};return{...C(t),getCommentList:d,insertCommentItem:l,deleteComment:r,recoverComment:c}}),I=v;export{I as u};
